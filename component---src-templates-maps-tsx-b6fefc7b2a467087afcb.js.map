{"version":3,"sources":["webpack:///./src/utils/tileTree.ts","webpack:///./src/components/MeshFeature.tsx","webpack:///./src/components/GrayScaleFilter.tsx","webpack:///./src/components/MapApp.tsx","webpack:///./src/components/drawer/MapHandler.tsx","webpack:///./src/components/fa-buttons/TwitterIcon.tsx","webpack:///./src/components/fa-buttons/FacebookIcon.tsx","webpack:///./src/components/drawer/SharesList.tsx","webpack:///./src/components/drawer/DrawerTable.tsx","webpack:///./src/components/ValuesTable.tsx","webpack:///./src/components/DrawerInner.tsx","webpack:///./src/components/MapLegends.tsx","webpack:///./src/components/TableApp.tsx","webpack:///./src/components/BuffersArcs.tsx","webpack:///./src/components/DirectionApp.tsx","webpack:///./src/components/AdBox.tsx","webpack:///./src/templates/maps.tsx","webpack:///./.cache/gatsby-browser-entry.js","webpack:///./.cache/public-page-renderer.js","webpack:///./src/utils/types.ts","webpack:///./.cache/public-page-renderer-prod.js","webpack:///./src/components/Attribution.tsx","webpack:///./src/components/MapAttribution.tsx","webpack:///./src/image/place.svg"],"names":["TileSet","options","this","tileUrl","url","maxZoom","minZoom","tileTree","treeIncludesTile","tile","x","y","z","hasOwnProperty","toString","tile2tree","_x$toString","_this$tileTree$z$toSt","_this$tileTree$z$toSt2","fetchTiles","tiles","_this","Promise","resolve","tasks","map","fetchTile","all","then","data","_this2","fetchUrl","replace","fetch","res","ok","Error","blob","tileWithURL","Object","assign","URL","createObjectURL","catch","undefined","isRequireFetch","_this3","every","setTileUrlFromTree","_this4","filter","updateTiles","_callee","newTiles","tilesInTree","tilesShouldFetch","fetchedTiles","_this5","regenerator_default","a","wrap","_context","prev","next","sent","abrupt","concat","stop","colorScale","scaleSequential","interpolateSpectral","domain","sizeScale","scalePow","range","exponent","MeshRect","props","feature","projection","val","properties","center","geometry","coordinates","size","Math","abs","min","max","scale","react","fill","fillOpacity","width","height","style","mixBlendMode","filterMatrix","GrayScaleFilter","id","type","values","join","d3tile","require","Map","state","fetchStatus","_tileSet","_terrain","_getTileCoordinates","_this$props","mag","zoomer","log2","PI","pow","translate","v","index","array","_fetchTiles","tileSet","componentDidMount","render","_this$props2","classes","buffers","geojson","mapState","popVisibility","bufferVisibility","zoomLevel","terrain","geoMercator","fitExtent","path","geoPath","tileCoords","renderTiles","hoge","LinearProgress_default","className","progress","color","setState","root","components_GrayScaleFilter","opacity","key","xlinkHref","imageRendering","points","features","MeshFeature","bb","bbox","lb","buffer","d","stroke","strokeWidth","bufferText","dy","textAnchor","radius","Place","transform","React","withStyles","theme","createStyles","fontFamily","typography","&:hover","fontSize","fontWeight","position","top","left","MapHandler","_ref","handleZoomIn","handleZoomOut","handleTerrain","handlePopVisibility","handleBufferVisibility","List_default","subheader","ListSubheader_default","Hidden_default","smDown","implementation","ListItem_default","button","selected","onClick","ListItemIcon_default","ZoomIn_default","ListItemText_default","ZoomOut_default","primary","LandScape_default","ListItemSecondaryAction_default","Switch_default","onChange","checked","People_default","Adjust_default","TwitterIcon","componentWillMount","library","add","faTwitter","Icon_default","react_fontawesome_index_es","icon","FacebookIcon","faFacebook","SharesList","summary","component","href","createTwiterShareUrl","target","rel","fa_buttons_TwitterIcon","createFbShareUrl","fa_buttons_FacebookIcon","encodeURI","name","encodeURIComponent","slug","styles","itemTitle","itemNumber","textAlign","tableState","ascSort","sortKey","sortRule","sortLabel","edges","appState","edge","node","navigateWithState","Typography_default","secondary","toLocaleString","thead","padding","spacing","unit","club","category","radius1000","radius3000","radius5000","radius10000","variant","Table_default","TableBody_default","TableRow_default","TableCell_default","align","toolbar","mixins","handleDrawerToggle","mapHandler","objectWithoutPropertiesLoose_default","mdUp","Clear_default","navigate","Reply_default","components_ValuesTable","drawer_MapHandler","Divider_default","drawer_SharesList","drawer_DrawerTable","display","flexDirection","alignItems","legends","justifyContent","legendItem","TableApp","anchorEl","menuOpen","filterRule","_handleSort","prevState","_handleFilterRule","str","indexOf","title","_this$state","Paper_default","Toolbar_default","flex","Tooltip_default","IconButton_default","aria-owns","aria-haspopup","buttonRef","FilterList_default","Popper_default","filterMenuWrapper","open","transition","disablePortal","placement","TransitionProps","Grow_default","transformOrigin","ClickAwayListener_default","onClickAway","event","contains","MenuList_default","MenuItem_default","CheckCircle_default","Remove_default","inset","tableWrapper","table","TableHead_default","indexCell","nameCell","TableSortLabel_default","active","direction","sortData","datum","scope","gatsby_browser_entry","to","marginTop","minWidth","overflowX","zIndex","isAsc","sortProperty","length","some","sort","b","margin","arc","dirs","items","arr","directions","angle","startAngle","endAngle","from","buffersToDirection","dir","item","i","d3arc","outerRadius","innerRadius","padAngle","calcDensity","DirectionApp","container","_root","_container","breakpoints","down","border","ad","AdBox","window","adsbygoogle","push","classnames","data-ad-client","data-ad-slot","data-ad-format","data-full-width-responsive","MapPage","location","drawerOpen","initialAppState","allVenuesJson","_data$venuesJson","venuesJson","topojson","topofeature","objects","others","drawer","components_DrawerInner","CssBaseline_default","Helmet_default","lang","content","createDescriptionString","property","AppBar_default","appBar","menuButton","role","Menu_default","apptitle","currentIndex","ArrowForward_default","SwipeableDrawer_default","onClose","onOpen","paper","drawerPaper","Drawer_default","autoSizerWrapper","es","MapApp","Fab_default","fabZoomIn","disabled","Add_default","fabZoomOut","components_MapLegends","components_AdBox","gutterBottom","disableHeight","_ref2","BuffersArcs","fullWidthContainer","components_DirectionApp","Attribution","MapAttribution","_drawer","_appBar","_menuButton","_apptitle","up","flexShrink","marginLeft","marginRight","flexGrow","paddingTop","@media (min-width: 600px)","lineHeight","maxWidth","paddingBottom","bottom","right","description","descParagraph","paddingLeft","paddingRight","query","__webpack_require__","r","__webpack_exports__","graphql","StaticQueryContext","StaticQuery","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","prop_types__WEBPACK_IMPORTED_MODULE_1__","prop_types__WEBPACK_IMPORTED_MODULE_1___default","gatsby_link__WEBPACK_IMPORTED_MODULE_2__","gatsby_link__WEBPACK_IMPORTED_MODULE_2___default","_public_page_renderer__WEBPACK_IMPORTED_MODULE_3__","_public_page_renderer__WEBPACK_IMPORTED_MODULE_3___default","_parse_path__WEBPACK_IMPORTED_MODULE_4__","createContext","createElement","Consumer","staticQueryData","children","propTypes","PropTypes","object","string","isRequired","func","m","module","exports","default","Radiuses","gatsby__WEBPACK_IMPORTED_MODULE_0__","ProdPageRenderer","pageResources","loader","getResourcesForPathnameSync","pathname","InternalPageRenderer","json","shape","react__WEBPACK_IMPORTED_MODULE_1__","gatsby__WEBPACK_IMPORTED_MODULE_2__","_material_ui_core_Typography__WEBPACK_IMPORTED_MODULE_3___default","site","siteMetadata","paragraph","author","twitter","siteName","_public_static_d_2933318586_json__WEBPACK_IMPORTED_MODULE_0__","_material_ui_core_Typography__WEBPACK_IMPORTED_MODULE_1__","_material_ui_core_Typography__WEBPACK_IMPORTED_MODULE_1___default","overflowWrap"],"mappings":"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","file":"component---src-templates-maps-tsx-b6fefc7b2a467087afcb.js","sourcesContent":["import fetch from 'isomorphic-fetch';\n\nexport interface Tile {\n  id: string;\n  x: number;\n  y: number;\n  z: number;\n  tx: number;\n  ty: number;\n  scale: number;\n  translate: [number, number];\n  mag: number;\n}\n\ntype TileUrl = string | undefined;\n\nexport interface TileWithURL extends Tile {\n  url: TileUrl;\n}\n\nexport interface TileTree {\n  [key: string]: {\n    [key: string]: {\n      [key: string]: TileUrl;\n    };\n  };\n}\n\ninterface TileSetOptions {\n  url?: string;\n  maxZoom?: number;\n  minZoom?: number;\n}\n\nclass TileSet {\n  readonly tileTree: TileTree;\n  readonly maxZoom: number;\n  readonly minZoom: number;\n  readonly tileUrl: string;\n  constructor(options: TileSetOptions = {}) {\n    this.tileUrl = options.url || '//cyberjapandata.gsi.go.jp/xyz/std/{z}/{x}/{y}.png';\n    this.maxZoom = options.maxZoom || 20;\n    this.minZoom = options.maxZoom || 2;\n    this.tileTree = {};\n  }\n\n  private treeIncludesTile(tile: Tile): boolean {\n    const { x, y, z } = tile;\n    return (\n      this.tileTree.hasOwnProperty(z.toString()) &&\n      this.tileTree[z.toString()].hasOwnProperty(x.toString()) &&\n      this.tileTree[z.toString()][x.toString()].hasOwnProperty(y.toString())\n    );\n  }\n\n  private tile2tree(tile: TileWithURL) {\n    const { x, y, z, url } = tile;\n    if (!this.tileTree.hasOwnProperty(z.toString())) {\n      this.tileTree[z.toString()] = {\n        [x.toString()]: {\n          [y.toString()]: url\n        }\n      };\n    } else if (!this.tileTree[z.toString()].hasOwnProperty(x.toString())) {\n      this.tileTree[z.toString()][x.toString()] = {\n        [y.toString()]: url\n      };\n    } else {\n      this.tileTree[z.toString()][x.toString()][y.toString()] = url;\n    }\n  }\n  // fetch new tiles\n  private fetchTiles(tiles: Tile[]): Promise<TileWithURL[]> {\n    return new Promise(resolve => {\n      const tasks = tiles.map(tile => this.fetchTile(tile, this.tileUrl));\n      Promise.all(tasks).then((data: TileWithURL[]) => {\n        resolve(data);\n      });\n    });\n  }\n  private fetchTile(tile: Tile, url: string): Promise<TileWithURL> {\n    const { x, y, z } = tile;\n    const fetchUrl = url.replace('{z}/{x}/{y}', `${z}/${x}/${y}`);\n\n    return fetch(fetchUrl)\n      .then(res => {\n        if (!res.ok) throw new Error();\n        return res.blob();\n      })\n      .then(blob => {\n        const tileWithURL: TileWithURL = {\n          ...tile,\n          url: URL.createObjectURL(blob)\n        };\n        this.tile2tree(tileWithURL);\n        return tileWithURL;\n      })\n      .catch(() => {\n        const tileWithURL: TileWithURL = {\n          ...tile,\n          url: undefined\n        };\n        this.tile2tree(tileWithURL);\n        return tileWithURL;\n      });\n  }\n\n  // helpers\n\n  public isRequireFetch(tiles: Tile[]): boolean {\n    return !tiles.every(tile => this.treeIncludesTile(tile));\n  }\n\n  public setTileUrlFromTree(tiles: Tile[]): TileWithURL[] {\n    return tiles\n      .filter(tile => this.treeIncludesTile(tile))\n      .map(tile => ({\n        ...tile,\n        url: this.tileTree[tile.z][tile.x][tile.y]\n      }));\n  }\n\n  public async updateTiles(newTiles: Tile[]) {\n    const tilesInTree = this.setTileUrlFromTree(newTiles.filter(tile => this.treeIncludesTile(tile)));\n\n    const tilesShouldFetch = newTiles.filter(tile => !this.treeIncludesTile(tile));\n\n    const fetchedTiles: TileWithURL[] = await this.fetchTiles(tilesShouldFetch);\n\n    return [...tilesInTree, ...fetchedTiles];\n  }\n}\n\nexport default TileSet;\n","import * as React from 'react';\nimport { scaleLinear, scalePow, scaleSequential } from 'd3-scale';\nimport { interpolateSpectral } from 'd3-scale-chromatic';\nimport { Feature, Point } from '@turf/helpers';\nimport { GeoProjection } from 'd3-geo';\n\nimport { MeshProperties } from '../utils/types';\n\ninterface Props {\n  feature: Feature<Point, MeshProperties>;\n  projection: GeoProjection;\n}\n\nexport const colorScale = scaleSequential(interpolateSpectral).domain([1250, 0]);\n\nexport const sizeScale = scalePow()\n  .domain([0, 1000])\n  .range([0, 8])\n  .exponent(0.5);\n\nconst MeshRect: React.FunctionComponent<Props> = (props: Props) => {\n  const { feature, projection } = props;\n  const { val } = feature.properties;\n  const center = projection(feature.geometry.coordinates);\n  const size = Math.abs(sizeScale(val) * Math.min(Math.max(1, projection.scale() / 125000), 2.5));\n\n  return (\n    <rect\n      fill={colorScale(val)}\n      fillOpacity={0.6}\n      x={center[0] - size / 2}\n      y={center[1] - size / 2}\n      width={size}\n      height={size}\n      style={{ mixBlendMode: 'multiply' }}\n    />\n  );\n};\n\nexport default MeshRect;\n","import * as React from 'react';\n/*\nconst filterMatrix = [\n  \"0.3333 0.3333 0.3333 0 0\",\n  \"0.3333 0.3333 0.3333 0 0\",\n  \"0.3333 0.3333 0.3333 0 0\",\n  \"0 0 0 1 0\"\n];\n*/\nconst filterMatrix = ['0.3333 0.3333 0.3333 0 0', '0.3333 0.3333 0.3333 0 0', '0.3333 0.3333 0.3333 0 0', '0 0 0 1 0'];\n\ninterface Props {\n  id: string;\n}\n\nconst GrayScaleFilter: React.FunctionComponent<Props> = (props: Props) => (\n  <filter id={props.id}>\n    <feColorMatrix type=\"matrix\" values={filterMatrix.join(' ')} />\n  </filter>\n);\n\nexport default GrayScaleFilter;\n","import * as React from 'react';\nimport { Theme } from '@material-ui/core/styles/createMuiTheme';\nimport withStyles, { WithStyles, StyleRules } from '@material-ui/core/styles/withStyles';\nimport createStyles from '@material-ui/core/styles/createStyles';\nconst d3tile = require('d3-tile').tile;\n\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport bbox from '@turf/bbox';\nimport { geoMercator, geoPath, GeoProjection, GeoPath } from 'd3-geo';\nimport TileSet, { Tile, TileWithURL } from '../utils/tileTree';\nimport MeshFeature from '../components/MeshFeature';\nimport GrayScaleFilter from '../components/GrayScaleFilter';\nimport { Feature, Point } from '@turf/helpers';\nimport { Buffer, MeshProperties, MapState } from '../utils/types';\n\nimport Place from '../image/place.svg';\n\nconst styles = (theme: Theme): StyleRules =>\n  createStyles({\n    root: {\n      fontFamily: theme.typography.fontFamily\n    },\n    buffer: {\n      opacity: 0.2,\n      '&:hover': {\n        opacity: 1\n      }\n    },\n    bufferText: { fontSize: '80%', fontWeight: 'bold' },\n    progress: {\n      position: 'absolute',\n      width: '100%',\n      top: 0,\n      left: 0\n    },\n    points: {\n      mixBlendMode: 'multiply'\n    }\n  });\n\ninterface D3TileArray<T> extends Array<T> {\n  scale: number;\n  translate: [number, number];\n}\n\ninterface Props extends WithStyles<typeof styles> {\n  width: number;\n  height: number;\n  mapState: MapState;\n  geojson: {\n    type: 'FeatureCollection';\n    features: Feature<Point, MeshProperties>[];\n  };\n  buffers: Buffer[];\n}\n\ninterface State {\n  readonly fetchStatus?: 'yet' | 'fetching' | 'fetched';\n}\n\nclass Map extends React.Component<Props, State> {\n  readonly state: State = {\n    fetchStatus: 'yet'\n  };\n  private _tileSet = new TileSet();\n  private _terrain = new TileSet({\n    url: '//cyberjapandata.gsi.go.jp/xyz/slopemap/{z}/{x}/{y}.png'\n  });\n  // Tile Maps\n  // slope: //cyberjapandata.gsi.go.jp/xyz/slopemap/{z}/{x}/{y}.png\n\n  private _getTileCoordinates = (projection: GeoProjection, maxZoom: number = 20): Tile[] => {\n    const { width, height } = this.props;\n    let mag: number = 1.5;\n\n    const zoomer = Math.log2((projection.scale() * 2 * mag * Math.PI) / 256);\n    // required zoom level > maxZoom\n    if (zoomer >= maxZoom + 0.5) {\n      mag = Math.pow(2, maxZoom + 0.5 - zoomer);\n    }\n\n    const tiles: Tile[] = d3tile()\n      .size([width * mag, height * mag])\n      .scale(projection.scale() * 2 * Math.PI * mag)\n      .translate(projection([0, 0]).map(v => v * mag))()\n      .map((tile: { x: number; y: number; z: number }, index: number, array: D3TileArray<Tile>) => ({\n        ...tile,\n        mag,\n        id: `${tile.z}/${tile.x}/${tile.y}`,\n        scale: array.scale,\n        translate: array.translate\n      }));\n\n    return tiles;\n  };\n\n  private _fetchTiles = (tiles: Tile[], tileSet: TileSet) => {\n    return tileSet.updateTiles(tiles);\n  };\n\n  componentDidMount() {}\n\n  public render() {\n    const { classes, buffers, geojson, mapState } = this.props;\n    const { popVisibility, bufferVisibility, zoomLevel, terrain } = mapState;\n    const width = this.props.width || 400;\n    const height = this.props.height || 400;\n    const projection = buffers ? geoMercator().fitExtent([[10, 40], [width - 10, height - 40]], buffers[zoomLevel]) : geoMercator();\n\n    const path: GeoPath = geoPath(projection);\n    const tileSet = !terrain ? this._tileSet : this._terrain;\n    const tileCoords = !terrain ? this._getTileCoordinates(projection) : this._getTileCoordinates(projection, 15);\n\n    let renderTiles: TileWithURL[] = tileSet.setTileUrlFromTree(tileCoords);\n    let hoge = null;\n    if (tileSet.isRequireFetch(tileCoords)) {\n      hoge = <LinearProgress className={classes.progress} color=\"secondary\" />;\n      this._fetchTiles(tileCoords, tileSet).then(() => {\n        this.setState({ fetchStatus: 'fetched' });\n      });\n    }\n\n    return (\n      <div className={classes.root}>\n        <svg width={width} height={height}>\n          <g>\n            <GrayScaleFilter id=\"grayscale\" />\n            <g filter=\"url(#grayscale)\" className={classes.tiles} style={{ opacity: this.state.fetchStatus !== 'fetching' ? 1 : 0 }}>\n              {renderTiles.map((tile, index) => (\n                <image\n                  key={index}\n                  xlinkHref={tile.url}\n                  x={((tile.x + tile.translate[0]) * tile.scale) / tile.mag}\n                  y={((tile.y + tile.translate[1]) * tile.scale) / tile.mag}\n                  width={tile.scale / tile.mag}\n                  height={tile.scale / tile.mag}\n                  imageRendering=\"optimizeQuality\"\n                />\n              ))}\n            </g>\n          </g>\n          {popVisibility ? (\n            <g className={classes.points} style={{ opacity: this.state.fetchStatus !== 'yet' ? 1 : 0 }}>\n              {geojson\n                ? geojson.features.map((feature, index) =>\n                    feature.geometry.type === 'Point' ? <MeshFeature key={index} feature={feature} projection={projection} /> : null\n                  )\n                : null}\n            </g>\n          ) : null}\n          {bufferVisibility ? (\n            <g>\n              {buffers\n                ? buffers.map((feature, index) => {\n                    const bb = bbox(feature);\n                    const lb = projection([bb[2] + (bb[0] - bb[2]) / 2, bb[1]]);\n                    return (\n                      <g key={index} className={classes.buffer}>\n                        <path d={path(feature) || undefined} fill=\"none\" stroke=\"rgba(255, 255, 255, 0.2)\" strokeWidth={12} />\n                        <path d={path(feature) || undefined} fill=\"none\" stroke=\"rgb(200, 60, 80)\" strokeWidth={3} />\n                        <text className={classes.bufferText} x={lb[0]} y={lb[1]} dy=\"1em\" textAnchor=\"middle\" fill=\"rgb(200, 60, 80)\">\n                          {feature.properties.radius}\n                        </text>\n                      </g>\n                    );\n                  })\n                : null}\n            </g>\n          ) : null}\n          <g>\n            <image xlinkHref={Place} x={width / 2} y={height / 2} width={28} height={28} transform=\"translate(-14, -26)\" />\n          </g>\n        </svg>\n        {hoge || null}\n      </div>\n    );\n  }\n}\n\nexport default withStyles(styles)(Map);\n","import * as React from 'react';\nimport List from '@material-ui/core/List';\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport Hidden from '@material-ui/core/Hidden';\nimport Switch from '@material-ui/core/Switch';\nimport { MapState } from '../../utils/types';\n\n// Icons\nimport ZoomIn from '@material-ui/icons/ZoomIn';\nimport ZoomOut from '@material-ui/icons/ZoomOut';\nimport LandScape from '@material-ui/icons/LandScape';\nimport PeopleIcon from '@material-ui/icons/People';\nimport Adjust from '@material-ui/icons/Adjust';\n\ninterface Props {\n  mapState: MapState;\n  handleZoomIn: () => any;\n  handleZoomOut: () => any;\n  handleTerrain: () => any;\n  handlePopVisibility: () => any;\n  handleBufferVisibility: () => any;\n}\n\nconst MapHandler: React.FunctionComponent<Props> = ({\n  mapState,\n  handleZoomIn,\n  handleZoomOut,\n  handleTerrain,\n  handlePopVisibility,\n  handleBufferVisibility\n}: Props) => (\n  <List subheader={<ListSubheader>地図</ListSubheader>}>\n    <Hidden smDown implementation=\"css\">\n      <ListItem button selected={mapState.zoomLevel === 0} onClick={handleZoomIn}>\n        <ListItemIcon>\n          <ZoomIn />\n        </ListItemIcon>\n        <ListItemText>地図を拡大</ListItemText>\n      </ListItem>\n      <ListItem button selected={mapState.zoomLevel === 3} onClick={handleZoomOut}>\n        <ListItemIcon>\n          <ZoomOut />\n        </ListItemIcon>\n        <ListItemText primary=\"地図を縮小\" />\n      </ListItem>\n    </Hidden>\n    <ListItem button>\n      <ListItemIcon>\n        <LandScape />\n      </ListItemIcon>\n      <ListItemText primary=\"地形モード\" />\n      <ListItemSecondaryAction>\n        <Switch onChange={handleTerrain} checked={mapState.terrain} />\n      </ListItemSecondaryAction>\n    </ListItem>\n    <ListItem>\n      <ListItemIcon>\n        <PeopleIcon />\n      </ListItemIcon>\n      <ListItemText primary=\"人口\" />\n      <ListItemSecondaryAction>\n        <Switch onChange={handlePopVisibility} checked={mapState.popVisibility} />\n      </ListItemSecondaryAction>\n    </ListItem>\n    <ListItem>\n      <ListItemIcon>\n        <Adjust />\n      </ListItemIcon>\n      <ListItemText primary=\"距離円\" />\n      <ListItemSecondaryAction>\n        <Switch onChange={handleBufferVisibility} checked={mapState.bufferVisibility} />\n      </ListItemSecondaryAction>\n    </ListItem>\n  </List>\n);\n\nexport default MapHandler;\n","import * as React from 'react';\nimport Icon from '@material-ui/core/Icon';\nimport { library } from '@fortawesome/fontawesome-svg-core';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faTwitter } from '@fortawesome/free-brands-svg-icons/faTwitter';\n\ninterface Props {\n  color?: 'primary' | 'secondary' | 'action' | 'error' | 'disabled';\n}\n\nclass TwitterIcon extends React.PureComponent<Props> {\n  componentWillMount() {\n    library.add(faTwitter);\n  }\n  public render() {\n    const { color } = this.props;\n    return (\n      <Icon color={color}>\n        <FontAwesomeIcon icon={['fab', 'twitter']} />\n      </Icon>\n    );\n  }\n}\n\nexport default TwitterIcon;\n","import * as React from 'react';\nimport Icon from '@material-ui/core/Icon';\nimport { library } from '@fortawesome/fontawesome-svg-core';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faFacebook } from '@fortawesome/free-brands-svg-icons/faFacebook';\n\ninterface Props {\n  color?: 'primary' | 'secondary' | 'action' | 'error' | 'disabled';\n}\n\nclass FacebookIcon extends React.PureComponent<Props> {\n  componentWillMount() {\n    library.add(faFacebook);\n  }\n  public render() {\n    const { color } = this.props;\n    return (\n      <Icon color={color}>\n        <FontAwesomeIcon icon={['fab', 'facebook']} />\n      </Icon>\n    );\n  }\n}\n\nexport default FacebookIcon;\n","import * as React from 'react';\nimport List from '@material-ui/core/List';\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport TwitterIcon from '../fa-buttons/TwitterIcon';\nimport FacebookIcon from '../fa-buttons/FacebookIcon';\nimport { Summary } from '../../utils/types';\n\ninterface Props {\n  summary: Summary;\n}\n\nconst SharesList: React.FunctionComponent<Props> = ({ summary }: Props) => (\n  <List subheader={<ListSubheader>シェア</ListSubheader>}>\n    <ListItem button component=\"a\" href={createTwiterShareUrl(summary)} target=\"_blank\" rel=\"noopener noreferrer\">\n      <ListItemIcon>\n        <TwitterIcon />\n      </ListItemIcon>\n      <ListItemText primary=\"Twitterで共有\" />\n    </ListItem>\n    <ListItem button component=\"a\" href={createFbShareUrl(summary)} target=\"_blank\" rel=\"noopener noreferrer\">\n      <ListItemIcon>\n        <FacebookIcon />\n      </ListItemIcon>\n      <ListItemText primary=\"Facebookで共有\" />\n    </ListItem>\n  </List>\n);\n\nexport default SharesList;\n\n// helpers\nfunction createTwiterShareUrl(summary: Summary): string {\n  return (\n    `https://twitter.com/intent/tweet?text=` +\n    encodeURI(`${summary.name}周辺の人口`) +\n    `&url=` +\n    encodeURIComponent(`https://cieloazul310.github.io/gatsby-stadiums-population/${summary.slug}/`)\n  );\n}\n\nfunction createFbShareUrl(summary: Summary): string {\n  return (\n    `https://www.facebook.com/sharer/sharer.php?u=` +\n    encodeURIComponent(`https://cieloazul310.github.io/gatsby-stadiums-population/${summary.slug}/`)\n  );\n}\n","import * as React from 'react';\nimport createStyles from '@material-ui/core/styles/createStyles';\nimport withStyles, { WithStyles, StyleRules } from '@material-ui/core/styles/withStyles';\nimport List from '@material-ui/core/List';\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Typography from '@material-ui/core/Typography';\n\nimport { navigateWithState, VenueEdge, AppState, TableState } from '../../utils/types';\n\nconst styles: StyleRules = createStyles({\n  root: {},\n  itemTitle: {\n    fontSize: '80%',\n    fontWeight: 'bold'\n  },\n  itemNumber: {\n    textAlign: 'right'\n  }\n});\n\ninterface Props extends WithStyles<typeof styles> {\n  slug: string;\n  edges: VenueEdge[];\n  appState: AppState;\n}\n\nconst DrawerTable: React.FC<Props> = ({ classes, slug, edges, appState }: Props) => (\n  <List className={classes.root} subheader={<ListSubheader>{`一覧 ${createSortString(appState.tableState)}`}</ListSubheader>}>\n    {edges.map(edge => (\n      <ListItem\n        key={edge.node.summary.slug}\n        button\n        selected={edge.node.summary.slug === slug}\n        onClick={() => {\n          navigateWithState(`/${edge.node.summary.slug}/`, appState);\n        }}\n      >\n        <ListItemText\n          primary={<Typography className={classes.itemTitle}>{edge.node.summary.name}</Typography>}\n          secondary={\n            <Typography component=\"span\" className={classes.itemNumber}>\n              {edge.node.summary[sortKeyToProps(appState.tableState)].toLocaleString()}\n            </Typography>\n          }\n        />\n      </ListItem>\n    ))}\n  </List>\n);\n\nexport default withStyles(styles)(DrawerTable);\n\n// helpers\nfunction sortKeyToProps(tableState: TableState) {\n  return tableState.sortKey === 0\n    ? 'radius1000'\n    : tableState.sortKey === 1\n    ? 'radius3000'\n    : tableState.sortKey === 2\n    ? 'radius5000'\n    : 'radius10000';\n}\n\nfunction createSortString(tableState: TableState): string {\n  const { ascSort, sortKey } = tableState;\n  const sortRule = ascSort ? '昇順' : '降順';\n  const sortLabel = ['1km', '3km', '5km', '10km'][sortKey];\n\n  return `${sortLabel}圏人口 ${sortRule}`;\n}\n","import * as React from 'react';\nimport { Theme } from '@material-ui/core/styles/createMuiTheme';\nimport withStyles, { WithStyles, StyleRules } from '@material-ui/core/styles/withStyles';\nimport createStyles from '@material-ui/core/styles/createStyles';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport Typography from '@material-ui/core/Typography';\nimport { Summary } from '../utils/types';\n\nconst styles = (theme: Theme): StyleRules =>\n  createStyles({\n    root: {},\n    thead: {\n      padding: theme.spacing.unit * 2\n    }\n  });\n\ninterface Props extends WithStyles<typeof styles> {\n  summary: Summary;\n}\n\nconst ValuesTable: React.FunctionComponent<Props> = (props: Props) => {\n  const { classes, summary } = props;\n  const { club, category, radius1000, radius3000, radius5000, radius10000 } = summary;\n\n  return (\n    <div className={classes.root}>\n      <div className={classes.thead}>\n        <Typography variant=\"caption\">クラブ: {club.join(', ')}</Typography>\n        <Typography variant=\"caption\">カテゴリー: {category.join(', ')}</Typography>\n      </div>\n      <Table>\n        <TableBody>\n          <TableRow>\n            <TableCell align=\"right\">1km圏</TableCell>\n            <TableCell align=\"right\">{radius1000.toLocaleString()}</TableCell>\n          </TableRow>\n          <TableRow>\n            <TableCell align=\"right\">3km圏</TableCell>\n            <TableCell align=\"right\">{radius3000.toLocaleString()}</TableCell>\n          </TableRow>\n          <TableRow>\n            <TableCell align=\"right\">5km圏</TableCell>\n            <TableCell align=\"right\">{radius5000.toLocaleString()}</TableCell>\n          </TableRow>\n          <TableRow>\n            <TableCell align=\"right\">10km圏</TableCell>\n            <TableCell align=\"right\">{radius10000.toLocaleString()}</TableCell>\n          </TableRow>\n        </TableBody>\n      </Table>\n    </div>\n  );\n};\n\nexport default withStyles(styles)(ValuesTable);\n","import * as React from 'react';\nimport { navigate } from 'gatsby';\nimport { Theme } from '@material-ui/core/styles/createMuiTheme';\nimport createStyles from '@material-ui/core/styles/createStyles';\nimport withStyles, { WithStyles, StyleRules } from '@material-ui/core/styles/withStyles';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Divider from '@material-ui/core/Divider';\nimport Hidden from '@material-ui/core/Hidden';\n\n// Drawer Components\nimport MapHandler from './drawer/MapHandler';\nimport SharesList from './drawer/SharesList';\nimport DrawerTable from './drawer/DrawerTable';\n\n// Icons\nimport Clear from '@material-ui/icons/Clear';\nimport Reply from '@material-ui/icons/Reply';\n\nimport ValuesTable from '../components/ValuesTable';\nimport { Summary, AppState, VenueEdge } from '../utils/types';\n\nconst styles = (theme: Theme): StyleRules =>\n  createStyles({\n    root: {},\n    toolbar: theme.mixins.toolbar\n  });\n\ninterface Props extends WithStyles<typeof styles> {\n  summary: Summary;\n  appState: AppState;\n  edges: VenueEdge[];\n  handleDrawerToggle: () => any;\n  handleZoomIn: () => any;\n  handleZoomOut: () => any;\n  handleTerrain: () => any;\n  handlePopVisibility: () => any;\n  handleBufferVisibility: () => any;\n}\n\nconst DrawerInner: React.FunctionComponent<Props> = ({ classes, summary, appState, edges, handleDrawerToggle, ...mapHandler }: Props) => {\n  const { mapState } = appState;\n\n  const DrawerToolBar = () => (\n    <div className={classes.toolbar}>\n      <List>\n        <Hidden mdUp implementation=\"css\">\n          <ListItem button onClick={handleDrawerToggle}>\n            <ListItemIcon>\n              <Clear />\n            </ListItemIcon>\n            <ListItemText primary=\"閉じる\" />\n          </ListItem>\n        </Hidden>\n        <ListItem\n          button\n          onClick={() => {\n            navigate('/', { state: appState });\n          }}\n        >\n          <ListItemIcon>\n            <Reply />\n          </ListItemIcon>\n          <ListItemText>表に戻る</ListItemText>\n        </ListItem>\n      </List>\n    </div>\n  );\n\n  return (\n    <div className={classes.root}>\n      <DrawerToolBar />\n      <ValuesTable summary={summary} />\n      <MapHandler mapState={mapState} {...mapHandler} />\n      <Divider />\n      <SharesList summary={summary} />\n      <Divider />\n      <DrawerTable slug={summary.slug} edges={edges} appState={appState} />\n    </div>\n  );\n};\n\nexport default withStyles(styles)(DrawerInner);\n","import * as React from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport { Theme } from '@material-ui/core/styles/createMuiTheme';\nimport withStyles, { WithStyles, StyleRules } from '@material-ui/core/styles/withStyles';\nimport createStyles from '@material-ui/core/styles/createStyles';\nimport { sizeScale, colorScale } from './MeshFeature';\n\nconst styles = (theme: Theme): StyleRules =>\n  createStyles({\n    root: {\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center'\n    },\n    legends: {\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'flex-end'\n    },\n    legendItem: {\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center',\n      fontSize: '80%',\n      padding: theme.spacing.unit\n    }\n  });\n\ntype Props = WithStyles<typeof styles>;\n\nconst MapLegends: React.FunctionComponent<Props> = (props: Props) => (\n  <div className={props.classes.root}>\n    <div className={props.classes.legends}>\n      {[100, 250, 500, 750, 1000, 1500, 2000].map(val => {\n        const size = sizeScale(val) * 2;\n        const color = colorScale(val);\n        return (\n          <div className={props.classes.legendItem} key={val}>\n            <svg width={30} height={30}>\n              <rect x={15 - size / 2} y={15 - size / 2} width={size} height={size} fill={color} fillOpacity={1} />\n            </svg>\n            <Typography variant=\"caption\">{val}</Typography>\n          </div>\n        );\n      })}\n    </div>\n    <Typography variant=\"caption\">1メッシュ(約250m四方)に含まれる人口</Typography>\n  </div>\n);\n\nexport default withStyles(styles)(MapLegends);\n","import * as React from 'react';\nimport { Link } from 'gatsby';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport TableSortLabel from '@material-ui/core/TableSortLabel';\nimport Paper from '@material-ui/core/Paper';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport IconButton from '@material-ui/core/IconButton';\nimport FilterListIcon from '@material-ui/icons/FilterList';\nimport Popper from '@material-ui/core/Popper';\nimport Grow from '@material-ui/core/Grow';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport MenuList from '@material-ui/core/MenuList';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\nimport RemoveIcon from '@material-ui/icons/Remove';\nimport { Theme } from '@material-ui/core/styles/createMuiTheme';\nimport Typography from '@material-ui/core/Typography';\nimport withStyles, { WithStyles, StyleRules } from '@material-ui/core/styles/withStyles';\nimport createStyles from '@material-ui/core/styles/createStyles';\nimport { Summary, VenueEdge, AppState, TableState } from '../utils/types';\n\nconst tableStyles = (theme: Theme): StyleRules =>\n  createStyles({\n    root: {\n      width: '100%',\n      marginTop: theme.spacing.unit * 3\n    },\n    table: {\n      minWidth: 760\n    },\n    tableWrapper: {\n      overflowX: 'auto'\n    },\n    indexCell: {\n      width: '2em',\n      padding: '4px 8px 4px 8px'\n    },\n    nameCell: {\n      width: '16em',\n      padding: '4px 16px 4px 24px'\n    },\n    filterMenuWrapper: {\n      zIndex: 1\n    }\n  });\n\ninterface Props extends WithStyles<typeof tableStyles> {\n  title: string;\n  data: Array<VenueEdge>;\n  appState: AppState | null;\n}\n\ninterface State extends TableState {\n  readonly menuOpen: boolean;\n}\n\nclass TableApp extends React.Component<Props, State> {\n  private anchorEl: HTMLElement = undefined;\n  readonly state: State = this.props.appState\n    ? {\n        ...this.props.appState.tableState,\n        menuOpen: false\n      }\n    : {\n        ascSort: false,\n        sortKey: 3,\n        filterRule: [],\n        menuOpen: false\n      };\n\n  private _handleSort = (index: number) => {\n    this.setState(prevState => ({\n      ascSort: prevState.sortKey === index ? !prevState.ascSort : false,\n      sortKey: index\n    }));\n  };\n\n  private _handleFilterRule = (str: string) => {\n    this.setState(prevState => ({\n      filterRule:\n        prevState.filterRule.indexOf(str) >= 0 ? prevState.filterRule.filter(filter => filter !== str) : [...prevState.filterRule, str]\n    }));\n  };\n\n  public render() {\n    const { classes, title, data, appState } = this.props;\n    const { ascSort, sortKey, filterRule, menuOpen } = this.state;\n    return (\n      <Paper className={classes.root}>\n        <Toolbar>\n          <div style={{ flex: '0 0 auto' }}>\n            <Typography variant=\"h6\">{title}</Typography>\n          </div>\n          <div style={{ flex: '1 1 100%' }} />\n          <div>\n            <div>\n              <Tooltip title=\"Filter\">\n                <IconButton\n                  aria-owns={menuOpen ? 'menu-list' : undefined}\n                  aria-haspopup=\"true\"\n                  buttonRef={node => {\n                    this.anchorEl = node;\n                  }}\n                  onClick={() => {\n                    this.setState(prev => ({ menuOpen: !prev.menuOpen }));\n                  }}\n                >\n                  <FilterListIcon />\n                </IconButton>\n              </Tooltip>\n              <Popper\n                className={classes.filterMenuWrapper}\n                anchorEl={this.anchorEl}\n                open={menuOpen}\n                transition\n                disablePortal\n                placement=\"bottom-end\"\n              >\n                {({ TransitionProps }) => (\n                  <Grow id=\"menu-list\" {...TransitionProps} style={{ transformOrigin: 'right top' }}>\n                    <Paper>\n                      <ClickAwayListener\n                        onClickAway={event => {\n                          if (this.anchorEl.contains(event.target)) {\n                            return;\n                          }\n                          this.setState({ menuOpen: false });\n                        }}\n                      >\n                        <MenuList>\n                          {['J1', 'J2', 'J3', 'JFL', '地域', 'その他'].map((str, index) => (\n                            <MenuItem\n                              key={index}\n                              onClick={() => {\n                                this._handleFilterRule(str);\n                              }}\n                            >\n                              <ListItemIcon>{filterRule.indexOf(str) < 0 ? <CheckCircleIcon /> : <RemoveIcon />}</ListItemIcon>\n                              <ListItemText inset primary={str} />\n                            </MenuItem>\n                          ))}\n                        </MenuList>\n                      </ClickAwayListener>\n                    </Paper>\n                  </Grow>\n                )}\n              </Popper>\n            </div>\n          </div>\n        </Toolbar>\n        <div className={classes.tableWrapper}>\n          <Table className={classes.table}>\n            <TableHead>\n              <TableRow>\n                <TableCell className={classes.indexCell} align=\"right\">\n                  i\n                </TableCell>\n                <TableCell className={classes.nameCell}>name</TableCell>\n                {['1km', '3km', '5km', '10km'].map((str, index) => (\n                  <TableCell key={index} align=\"right\">\n                    <TableSortLabel active={index === sortKey} direction={ascSort ? 'asc' : 'desc'} onClick={() => this._handleSort(index)}>\n                      {str}\n                    </TableSortLabel>\n                  </TableCell>\n                ))}\n              </TableRow>\n            </TableHead>\n            <TableBody>\n              {sortData(data, ascSort, sortKey, filterRule).map((datum, index) => (\n                <TableRow key={index}>\n                  <TableCell className={classes.indexCell} component=\"th\" scope=\"row\" align=\"right\">\n                    {index + 1}\n                  </TableCell>\n                  <TableCell className={classes.nameCell} component=\"th\" scope=\"row\">\n                    <Link\n                      to={`/${datum.node.summary.slug}/`}\n                      state={{\n                        mapState: appState.mapState || null,\n                        tableState: {\n                          ascSort,\n                          sortKey,\n                          filterRule\n                        }\n                      }}\n                    >\n                      {datum.node.summary.name}\n                    </Link>\n                  </TableCell>\n                  <TableCell align=\"right\">{datum.node.summary.radius1000.toLocaleString()}</TableCell>\n                  <TableCell align=\"right\">{datum.node.summary.radius3000.toLocaleString()}</TableCell>\n                  <TableCell align=\"right\">{datum.node.summary.radius5000.toLocaleString()}</TableCell>\n                  <TableCell align=\"right\">{datum.node.summary.radius10000.toLocaleString()}</TableCell>\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n        </div>\n      </Paper>\n    );\n  }\n}\n\nexport default withStyles(tableStyles)(TableApp);\n\n// utils\n\nexport function sortData(data: VenueEdge[], ascSort: boolean, sortKey: number, filterRule: string[] = []): VenueEdge[] {\n  const isAsc = ascSort ? 1 : -1;\n  const sortProperty = sortKey === 0 ? 'radius1000' : sortKey === 1 ? 'radius3000' : sortKey === 2 ? 'radius5000' : 'radius10000';\n\n  return filterRule.length\n    ? data\n        .filter(datum => datum.node.summary.category.some(category => filterRule.indexOf(category) < 0))\n        .sort((a, b) => isAsc * (a.node.summary[sortProperty] - b.node.summary[sortProperty]))\n    : data.sort((a, b) => isAsc * (a.node.summary[sortProperty] - b.node.summary[sortProperty]));\n}\n\nfunction filterIncludesEdge(filterRule: string[], edge: VenueEdge): boolean {\n  const categories = edge.node.summary.category;\n\n  return categories.some(category => filterRule.indexOf(category) < 0);\n}\n","import * as React from 'react';\nimport { Theme } from '@material-ui/core/styles/createMuiTheme';\nimport withStyles, { WithStyles, StyleRules } from '@material-ui/core/styles/withStyles';\nimport createStyles from '@material-ui/core/styles/createStyles';\nimport { arc as d3arc } from 'd3-shape';\nimport { scaleSequential } from 'd3-scale';\nimport { interpolateSpectral } from 'd3-scale-chromatic';\n\nimport { Buffer } from '../utils/types';\n\nconst styles = (theme: Theme): StyleRules =>\n  createStyles({\n    root: {\n      fontFamily: theme.typography.fontFamily,\n      margin: 'auto',\n      display: 'block'\n    },\n    arc: {\n      strokeWidth: 0,\n      '&:hover': {\n        strokeWidth: 3\n      }\n    }\n  });\n\ninterface Props extends WithStyles<typeof styles> {\n  width: number;\n  buffers: Buffer[];\n}\n\nconst color = scaleSequential(interpolateSpectral).domain([10000, 0]);\n\nconst BufferArcs: React.FunctionComponent<Props> = (props: Props) => {\n  const { classes, buffers, width } = props;\n  const size = Math.min(width, 600);\n  const dirs = buffersToDirection(buffers);\n\n  return (\n    <svg className={classes.root} width={size} height={size}>\n      <g transform={`translate(${size / 2}, ${size / 2})`}>\n        {dirs.map((dir, index) => (\n          <g key={index}>\n            {dir.items.map((item, i) => {\n              const arc = d3arc()\n                .outerRadius(((size - 48) * (i + 2)) / 10)\n                .innerRadius(((size - 48) * (i + 1)) / 10 + 4)\n                .padAngle(0.02);\n              return (\n                <g key={i}>\n                  <path\n                    className={classes.arc}\n                    d={arc(item)}\n                    fill={color(calcDensity(item.val, item.from, item.to))}\n                    fillOpacity={item.val ? 0.8 : 0.1}\n                    stroke={color(calcDensity(item.val, item.from, item.to))}\n                  />\n                </g>\n              );\n            })}\n          </g>\n        ))}\n      </g>\n      <g>\n        <text x={size / 2} dy=\"1.2em\" textAnchor=\"middle\">\n          北\n        </text>\n        <text x={size / 2} y={size} dy=\"-.2em\" textAnchor=\"middle\">\n          南\n        </text>\n        <text y={size / 2} dy=\".5em\" textAnchor=\"start\">\n          西\n        </text>\n        <text x={size} y={size / 2} dy=\".5em\" textAnchor=\"end\">\n          東\n        </text>\n      </g>\n    </svg>\n  );\n};\n\nexport default withStyles(styles)(BufferArcs);\n\n// utils\n\nfunction buffersToDirection(buffers: Buffer[]) {\n  const directions = ['north', 'northeast', 'east', 'southeast', 'south', 'southwest', 'west', 'northwest'];\n  const dirObjs = directions.map(str => ({\n    direction: str,\n    items: buffers.map((feature, index, arr) => ({\n      ...directionToAngle(str),\n      from: index > 0 ? arr[index - 1].properties.radius : 0,\n      to: feature.properties.radius,\n      val: index > 0 ? feature.properties[str] - arr[index - 1].properties[str] : feature.properties[str]\n    }))\n  }));\n  return dirObjs;\n}\n\nfunction directionToAngle(key: string) {\n  const directions = ['north', 'northeast', 'east', 'southeast', 'south', 'southwest', 'west', 'northwest'];\n  const angle = (Math.PI * 2) / directions.length;\n  return {\n    startAngle: directions.indexOf(key) * angle - angle / 2,\n    endAngle: directions.indexOf(key) * angle + angle / 2\n  };\n}\n\nfunction calcDensity(val: number, from: number, to: number) {\n  return from === 0\n    ? (val * 8) / (Math.pow(to / 1000, 2) * Math.PI)\n    : (val * 8) / (Math.pow(to / 1000, 2) * Math.PI - Math.pow(from / 1000, 2) * Math.PI);\n}\n","import * as React from 'react';\nimport { Theme } from '@material-ui/core/styles/createMuiTheme';\nimport withStyles, { WithStyles, StyleRules } from '@material-ui/core/styles/withStyles';\nimport createStyles from '@material-ui/core/styles/createStyles';\n\nconst styles = (theme: Theme): StyleRules =>\n  createStyles({\n    root: {\n      display: 'flex',\n      flexDirection: 'row',\n      [theme.breakpoints.down('sm')]: {\n        flexDirection: 'column'\n      }\n    },\n    container: {\n      width: '50%',\n      height: 480,\n      border: '1px solid #ccc',\n      [theme.breakpoints.down('sm')]: {\n        width: '100%'\n      }\n    }\n  });\n\ninterface Props extends WithStyles<typeof styles> {}\n\ninterface State {}\n\nclass DirectionApp extends React.Component<Props, State> {\n  public render() {\n    const { classes } = this.props;\n    return (\n      <div className={classes.root}>\n        <div className={classes.container} />\n        <div className={classes.container} />\n      </div>\n    );\n  }\n}\n\nexport default withStyles(styles)(DirectionApp);\n","import * as React from 'react';\nimport classnames from 'classnames';\n//import { Theme } from '@material-ui/core/styles/createMuiTheme';\nimport createStyles from '@material-ui/core/styles/createStyles';\nimport withStyles, { WithStyles /*StyleRules*/ } from '@material-ui/core/styles/withStyles';\nimport Typography from '@material-ui/core/Typography';\n\nconst styles = createStyles({\n  root: {\n    width: '100%'\n  },\n  ad: {\n    display: 'block'\n  }\n});\n\ntype Props = WithStyles<typeof styles>;\n\nclass AdBox extends React.PureComponent<Props> {\n  componentDidMount() {\n    (window.adsbygoogle = window.adsbygoogle || []).push({});\n  }\n\n  render() {\n    const { classes } = this.props;\n    return (\n      <div className={classes.root}>\n        <Typography variant=\"subtitle2\">広告</Typography>\n        <ins\n          className={classnames('adsbygoogle', classes.ad)}\n          data-ad-client=\"ca-pub-7323207940463794\"\n          data-ad-slot={3901734109}\n          data-ad-format=\"auto\"\n          data-full-width-responsive={true}\n        />\n      </div>\n    );\n  }\n}\n\nexport default withStyles(styles)(AdBox);\n","import * as React from 'react';\nimport { graphql, Link } from 'gatsby';\nimport Helmet from 'react-helmet';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport AppBar from '@material-ui/core/AppBar';\nimport ToolBar from '@material-ui/core/Toolbar';\nimport Drawer from '@material-ui/core/Drawer';\nimport SwipeableDrawer from '@material-ui/core/SwipeableDrawer';\nimport Hidden from '@material-ui/core/Hidden';\nimport IconButton from '@material-ui/core/IconButton';\nimport Menu from '@material-ui/icons/Menu';\nimport Fab from '@material-ui/core/Fab';\nimport ArrowForward from '@material-ui/icons/ArrowForward';\nimport Typography from '@material-ui/core/Typography';\n// styles\nimport { Theme } from '@material-ui/core/styles/createMuiTheme';\nimport withStyles, { WithStyles, StyleRules } from '@material-ui/core/styles/withStyles';\nimport createStyles from '@material-ui/core/styles/createStyles';\n// icons\nimport AddIcon from '@material-ui/icons/Add';\nimport RemoveIcon from '@material-ui/icons/Remove';\n\nimport { AutoSizer } from 'react-virtualized';\nimport { feature as topofeature } from 'topojson-client';\nimport { Topology } from 'topojson-specification';\n\nimport MapApp from '../components/MapApp';\nimport DrawerInner from '../components/DrawerInner';\nimport MapLegends from '../components/MapLegends';\nimport { sortData } from '../components/TableApp';\nimport BufferArcs from '../components/BuffersArcs';\nimport ValuesTable from '../components/ValuesTable';\nimport DirectionApp from '../components/DirectionApp';\nimport Attribution from '../components/Attribution';\nimport MapAttribution from '../components/MapAttribution';\nimport AdBox from '../components/AdBox';\nimport { Summary, LocationWithState, VenueEdge, MapState, initialAppState, navigateWithState } from '../utils/types';\n\nconst drawerWidth = 280;\n\nconst styles = (theme: Theme): StyleRules =>\n  createStyles({\n    root: {\n      display: 'flex'\n    },\n    drawer: {\n      [theme.breakpoints.up('md')]: {\n        width: drawerWidth,\n        flexShrink: 0\n      }\n    },\n    appBar: {\n      marginLeft: drawerWidth,\n      [theme.breakpoints.up('md')]: {\n        width: `calc(100% - ${drawerWidth}px)`\n      }\n    },\n    menuButton: {\n      marginRight: 10,\n      [theme.breakpoints.up('md')]: {\n        display: 'none'\n      }\n    },\n    drawerPaper: {\n      width: drawerWidth\n    },\n    content: {\n      flexGrow: 1,\n      paddingTop: 56,\n      '@media (min-width: 600px)': {\n        paddingTop: 64\n      }\n    },\n    apptitle: {\n      flexGrow: 1,\n      lineHeight: 1.2,\n      [theme.breakpoints.down('sm')]: {\n        fontSize: '90%'\n      }\n    },\n    container: {\n      width: '100%',\n      maxWidth: 800,\n      margin: 'auto',\n      padding: theme.spacing.unit * 2\n    },\n    fullWidthContainer: {\n      width: '100%',\n      margin: 'auto',\n      paddingTop: theme.spacing.unit * 2,\n      paddingBottom: theme.spacing.unit * 2\n    },\n    autoSizerWrapper: {\n      height: 'calc(100vh - 56px)',\n      '@media (min-width: 600px)': {\n        height: 'calc(100vh - 64px)'\n      }\n    },\n    fabZoomIn: {\n      position: 'absolute',\n      bottom: theme.spacing.unit * 10,\n      right: theme.spacing.unit * 2\n    },\n    fabZoomOut: {\n      position: 'absolute',\n      bottom: theme.spacing.unit * 2,\n      right: theme.spacing.unit * 2\n    },\n    description: {\n      maxWidth: 800,\n      margin: 'auto'\n    },\n    descParagraph: {\n      paddingLeft: theme.spacing.unit * 2,\n      paddingRight: theme.spacing.unit * 2\n    }\n  });\n\ninterface Props extends WithStyles<typeof styles> {\n  data: {\n    allVenuesJson: {\n      edges: Array<VenueEdge>;\n    };\n    venuesJson: {\n      fields: {\n        slug: string;\n      };\n      summary: Summary;\n      topojson: Topology;\n    };\n  };\n  location: LocationWithState;\n}\n\ninterface State extends MapState {\n  readonly drawerOpen: boolean;\n}\n\nclass MapPage extends React.Component<Props, State> {\n  readonly state = this.props.location.state\n    ? {\n        ...this.props.location.state.mapState,\n        drawerOpen: false\n      }\n    : {\n        ...initialAppState.mapState,\n        drawerOpen: false\n      };\n  private handleDrawerToggle = () => {\n    this.setState(prev => ({\n      drawerOpen: !prev.drawerOpen\n    }));\n  };\n  private handlePopVisibility = () => {\n    this.setState(prev => ({\n      popVisibility: !prev.popVisibility\n    }));\n  };\n  private handleBufferVisibility = () => {\n    this.setState(prev => ({\n      bufferVisibility: !prev.bufferVisibility\n    }));\n  };\n  private handleZoomIn = () => {\n    this.setState(prev => ({ zoomLevel: prev.zoomLevel !== 0 ? prev.zoomLevel - 1 : prev.zoomLevel }));\n  };\n  private handleZoomOut = () => {\n    this.setState(prev => ({ zoomLevel: prev.zoomLevel !== 3 ? prev.zoomLevel + 1 : prev.zoomLevel }));\n  };\n  private handleTerrain = () => {\n    this.setState(prev => ({\n      terrain: !prev.terrain\n    }));\n  };\n\n  public render() {\n    const { classes, data, location } = this.props;\n    const { popVisibility, bufferVisibility, zoomLevel, terrain } = this.state;\n    const tableState = location.state ? location.state.tableState : initialAppState.tableState;\n    const { edges } = data.allVenuesJson;\n    const { summary, topojson } = data.venuesJson;\n    const geojson = topofeature(topojson, topojson.objects.points);\n    const buffers = topofeature(topojson, topojson.objects.buffers).features;\n    const others = sortData(edges, tableState.ascSort, tableState.sortKey, tableState.filterRule);\n    const { name, club, slug } = summary;\n    const drawer = (\n      <DrawerInner\n        summary={summary}\n        edges={others}\n        appState={{ tableState, mapState: { popVisibility, bufferVisibility, zoomLevel, terrain } }}\n        handleDrawerToggle={this.handleDrawerToggle}\n        handleZoomIn={this.handleZoomIn}\n        handleZoomOut={this.handleZoomOut}\n        handleBufferVisibility={this.handleBufferVisibility}\n        handlePopVisibility={this.handlePopVisibility}\n        handleTerrain={this.handleTerrain}\n      />\n    );\n\n    return (\n      <div className={classes.root}>\n        <CssBaseline />\n        <Helmet>\n          <html lang=\"ja\" />\n          <title>{name}周辺の人口 | サッカースタジアムと人口</title>\n          <meta name=\"viewport\" content=\"width=device-width,initial-scale=1,minimum-scale=1,minimal-ui\" />\n          <meta name=\"description\" content={createDescriptionString(name, club)} />\n          <meta property=\"og:type\" content=\"article\" />\n          <meta property=\"og:title\" content={`${name}周辺の人口`} />\n          <meta property=\"og:image\" content=\"https://cieloazul310.github.io/img/ogp2.png\" />\n          <meta property=\"og:url\" content={`https://cieloazul310.github.io/gatsby-stadiums-population/${slug}/`} />\n          <meta property=\"og:site_name\" content=\"水戸地図\" />\n          <meta name=\"twitter:card\" content=\"summary\" />\n          <meta name=\"twitter:description\" content={createDescriptionString(name, club)} />\n          <meta name=\"apple-mobile-web-app-capable\" content=\"yes\" />\n          <meta name=\"apple-mobile-web-app-status-bar-style\" content=\"black\" />\n        </Helmet>\n        <AppBar className={classes.appBar} position=\"fixed\">\n          <ToolBar>\n            <IconButton\n              className={classes.menuButton}\n              role=\"presentation\"\n              aria-owns=\"menu\"\n              aria-haspopup=\"true\"\n              onClick={this.handleDrawerToggle}\n              color=\"inherit\"\n            >\n              <Menu />\n            </IconButton>\n            <Typography color=\"inherit\" className={classes.apptitle} component=\"h1\" variant=\"h6\">\n              {name}\n            </Typography>\n            <IconButton\n              aria-owns=\"next\"\n              role=\"button\"\n              aria-haspopup=\"true\"\n              onClick={() => {\n                const currentIndex = others.map(edge => edge.node.summary.slug).indexOf(slug);\n                const next = currentIndex === others.length - 1 ? others[0] : others[currentIndex + 1];\n                navigateWithState(`/${next.node.summary.slug}/`, {\n                  tableState,\n                  mapState: { popVisibility, bufferVisibility, zoomLevel, terrain }\n                });\n              }}\n              color=\"inherit\"\n            >\n              <ArrowForward />\n            </IconButton>\n          </ToolBar>\n        </AppBar>\n        <nav className={classes.drawer}>\n          <Hidden mdUp implementation=\"css\">\n            <SwipeableDrawer\n              variant=\"temporary\"\n              open={this.state.drawerOpen}\n              onClose={this.handleDrawerToggle}\n              onOpen={this.handleDrawerToggle}\n              classes={{ paper: classes.drawerPaper }}\n            >\n              {drawer}\n            </SwipeableDrawer>\n          </Hidden>\n          <Hidden smDown implementation=\"css\">\n            <Drawer classes={{ paper: classes.drawerPaper }} variant=\"permanent\" open>\n              {drawer}\n            </Drawer>\n          </Hidden>\n        </nav>\n        <div className={classes.content}>\n          <div className={classes.autoSizerWrapper}>\n            <AutoSizer>\n              {({ width, height }) => (\n                <div>\n                  <MapApp\n                    width={width}\n                    height={height}\n                    geojson={geojson}\n                    buffers={buffers}\n                    mapState={{ popVisibility, bufferVisibility, zoomLevel, terrain }}\n                  />\n                  <Hidden implementation=\"css\" mdUp>\n                    <Fab className={classes.fabZoomIn} color=\"primary\" disabled={zoomLevel === 0} onClick={this.handleZoomIn} role=\"button\">\n                      <AddIcon />\n                    </Fab>\n                    <Fab\n                      className={classes.fabZoomOut}\n                      color=\"primary\"\n                      disabled={zoomLevel === 3}\n                      onClick={this.handleZoomOut}\n                      role=\"button\"\n                    >\n                      <RemoveIcon />\n                    </Fab>\n                  </Hidden>\n                </div>\n              )}\n            </AutoSizer>\n          </div>\n          <div className={classes.container}>\n            <MapLegends />\n          </div>\n          <div className={classes.container}>\n            <AdBox />\n          </div>\n          <div className={classes.container}>\n            <Typography component=\"h2\" variant=\"h5\" gutterBottom>\n              {name}\n            </Typography>\n          </div>\n          <div className={classes.container}>\n            <ValuesTable summary={summary} />\n          </div>\n          <div className={classes.container}>\n            <AutoSizer disableHeight>{({ width }) => <BufferArcs buffers={buffers} width={width} />}</AutoSizer>\n          </div>\n          <div className={classes.fullWidthContainer}>\n            <DirectionApp />\n          </div>\n          <div className={classes.container}>\n            <Attribution />\n          </div>\n          <div className={classes.container}>\n            <MapAttribution />\n            <Link to=\"/\" state={{ tableState, mapState: { popVisibility, bufferVisibility, zoomLevel } }}>\n              トップに戻る\n            </Link>\n          </div>\n          <div className={classes.container}>\n            <AdBox />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\n//export default withRoot(withStyles(styles)(MapPage));\nexport default withStyles(styles)(MapPage);\n\n// helper\n\nfunction createDescriptionString(name: string, club: string[]): string {\n  const intro = club[0] !== 'その他' ? `${club.join(',')} のホームスタジアム・` : '';\n  return `${intro}${name}周辺の人口を総務省統計局の国勢調査に関する地域メッシュ統計(平成27年度)から算出し、地図に表示しました。`;\n}\n\nexport const query = graphql`\n  query($slug: String!) {\n    allVenuesJson {\n      edges {\n        node {\n          summary {\n            slug\n            name\n            club\n            shortname\n            category\n            radius1000\n            radius3000\n            radius5000\n            radius10000\n          }\n        }\n      }\n    }\n    venuesJson(fields: { slug: { eq: $slug } }) {\n      fields {\n        slug\n      }\n      summary {\n        name\n        club\n        shortname\n        category\n        radius1000\n        radius3000\n        radius5000\n        radius10000\n        slug\n      }\n      topojson {\n        type\n        transform {\n          scale\n          translate\n        }\n        objects {\n          points {\n            type\n            geometries {\n              type\n              coordinates\n              properties {\n                id\n                val\n              }\n            }\n          }\n          buffers {\n            type\n            geometries {\n              type\n              arcs\n              properties {\n                radius\n                population\n                north\n                northeast\n                east\n                southeast\n                south\n                southwest\n                west\n                northwest\n              }\n            }\n          }\n        }\n        arcs\n      }\n    }\n  }\n`;\n","import React from \"react\"\nimport PropTypes from \"prop-types\"\nimport Link, {\n  withPrefix,\n  navigate,\n  push,\n  replace,\n  navigateTo,\n} from \"gatsby-link\"\nimport PageRenderer from \"./public-page-renderer\"\nimport parsePath from \"./parse-path\"\n\nconst StaticQueryContext = React.createContext({})\n\nconst StaticQuery = props => (\n  <StaticQueryContext.Consumer>\n    {staticQueryData => {\n      if (\n        props.data ||\n        (staticQueryData[props.query] && staticQueryData[props.query].data)\n      ) {\n        return (props.render || props.children)(\n          props.data ? props.data.data : staticQueryData[props.query].data\n        )\n      } else {\n        return <div>Loading (StaticQuery)</div>\n      }\n    }}\n  </StaticQueryContext.Consumer>\n)\n\nStaticQuery.propTypes = {\n  data: PropTypes.object,\n  query: PropTypes.string.isRequired,\n  render: PropTypes.func,\n  children: PropTypes.func,\n}\n\nfunction graphql() {\n  throw new Error(\n    `It appears like Gatsby is misconfigured. Gatsby related \\`graphql\\` calls ` +\n      `are supposed to only be evaluated at compile time, and then compiled away,. ` +\n      `Unfortunately, something went wrong and the query was left in the compiled code.\\n\\n.` +\n      `Unless your site has a complex or custom babel/Gatsby configuration this is likely a bug in Gatsby.`\n  )\n}\n\nexport {\n  Link,\n  withPrefix,\n  graphql,\n  parsePath,\n  navigate,\n  push, // TODO replace for v3\n  replace, // TODO remove replace for v3\n  navigateTo, // TODO: remove navigateTo for v3\n  StaticQueryContext,\n  StaticQuery,\n  PageRenderer,\n}\n","const preferDefault = m => (m && m.default) || m\n\nif (process.env.BUILD_STAGE === `develop`) {\n  module.exports = preferDefault(require(`./public-page-renderer-dev`))\n} else if (process.env.BUILD_STAGE === `build-javascript`) {\n  module.exports = preferDefault(require(`./public-page-renderer-prod`))\n} else {\n  module.exports = () => null\n}\n","import { navigate } from 'gatsby';\nimport { Feature, Polygon } from '@turf/helpers';\nimport { LocationProps } from '@reach/router';\n\nexport const initialAppState: AppState = {\n  tableState: {\n    ascSort: false,\n    sortKey: 3,\n    filterRule: []\n  },\n  mapState: {\n    popVisibility: true,\n    bufferVisibility: true,\n    zoomLevel: 3,\n    terrain: false\n  }\n};\n\n// gatsby navigate with strict type checking\nexport const navigateWithState = (to: string, state: AppState) => {\n  navigate(to, { state });\n};\n\nexport enum Radiuses {\n  radius1000 = '1km',\n  radius3000 = '3km',\n  radius5000 = '5km',\n  radius10000 = '10km'\n}\n\nexport interface TableState {\n  readonly ascSort: boolean;\n  readonly sortKey: number;\n  readonly filterRule: string[];\n}\n\nexport interface MapState {\n  readonly popVisibility: boolean;\n  readonly bufferVisibility: boolean;\n  readonly zoomLevel: number;\n  readonly terrain?: boolean;\n}\n\nexport interface AppState {\n  tableState: TableState;\n  mapState: MapState;\n}\n\nexport interface LocationWithState extends LocationProps {\n  state: AppState | null;\n}\n\nexport interface Summary {\n  name: string;\n  club: string[];\n  category: string[];\n  shortname: string[];\n  slug: string;\n  radius1000: number;\n  radius3000: number;\n  radius5000: number;\n  radius10000: number;\n}\n\nexport interface VenueEdge {\n  node: {\n    summary: Summary;\n  };\n}\n\nexport interface BufferPropertis extends EighthDirections {\n  name: string;\n  radius: number;\n  population: number;\n}\n\nexport type Buffer = Feature<Polygon, BufferPropertis>;\n\nexport interface MeshProperties {\n  id: number;\n  val: number;\n}\n\nexport interface ForthDirections {\n  north: number;\n  east: number;\n  south: number;\n  west: number;\n}\n\nexport interface EighthDirections extends ForthDirections {\n  northeast: number;\n  southeast: number;\n  southwest: number;\n  northwest: number;\n}\n","import React from \"react\"\nimport PropTypes from \"prop-types\"\n\nimport InternalPageRenderer from \"./page-renderer\"\nimport loader from \"./loader\"\n\nconst ProdPageRenderer = ({ location }) => {\n  const pageResources = loader.getResourcesForPathnameSync(location.pathname)\n  return React.createElement(InternalPageRenderer, {\n    location,\n    pageResources,\n    ...pageResources.json,\n  })\n}\n\nProdPageRenderer.propTypes = {\n  location: PropTypes.shape({\n    pathname: PropTypes.string.isRequired,\n  }).isRequired,\n}\n\nexport default ProdPageRenderer\n","import * as React from 'react';\nimport { StaticQuery, graphql } from 'gatsby';\nimport Typography from '@material-ui/core/Typography';\n\ninterface Query {\n  site: {\n    siteMetadata: {\n      title: string;\n      siteUrl: string;\n      description: string;\n      author: {\n        name: string;\n        url: string;\n        siteName: string;\n        twitter: string;\n        github: string;\n      };\n    };\n  };\n}\n\nconst Attribution: React.FunctionComponent<{}> = () => (\n  <StaticQuery\n    query={graphql`\n      query {\n        site {\n          siteMetadata {\n            title\n            siteUrl\n            description\n            author {\n              name\n              url\n              siteName\n              twitter\n              github\n            }\n          }\n        }\n      }\n    `}\n    render={(data: Query) => (\n      <section>\n        <Typography variant=\"h5\" gutterBottom>\n          {data.site.siteMetadata.title}\n        </Typography>\n        <Typography variant=\"body1\" paragraph>\n          {data.site.siteMetadata.description}\n        </Typography>\n        <ul>\n          <Typography component=\"li\" variant=\"body1\">\n            {`Twitter: `}\n            <a href={`https://twitter.com/${data.site.siteMetadata.author.twitter}`} target=\"_blank\" rel=\"noopener noreferrer\">{`@${\n              data.site.siteMetadata.author.twitter\n            }`}</a>\n          </Typography>\n          <Typography component=\"li\" variant=\"body1\">\n            {`制作: ${data.site.siteMetadata.author.siteName} `}\n            <a href={data.site.siteMetadata.author.url} target=\"_blank\" rel=\"noopener noreferrer\">\n              {data.site.siteMetadata.author.url}\n            </a>\n          </Typography>\n        </ul>\n      </section>\n    )}\n  />\n);\n\nexport default Attribution;\n","import * as React from 'react';\nimport Typography from '@material-ui/core/Typography';\n\nconst MapAttribution: React.FC<{}> = () => (\n  <section>\n    <Typography variant=\"h5\" gutterBottom>\n      地図とデータについて\n    </Typography>\n    <Typography variant=\"h6\" gutterBottom>\n      データ\n    </Typography>\n    <Typography variant=\"body1\" paragraph>\n      {'国勢調査 2015年 5次メッシュ(250mメッシュ) その1 人口等基本集計に関する事項'}\n    </Typography>\n    <ul>\n      <Typography variant=\"body1\" component=\"li\" style={{ overflowWrap: 'break-word' }}>\n        {'URL: '}\n        <a\n          href=\"https://www.e-stat.go.jp/gis/statmap-search?page=1&type=1&toukeiCode=00200521&toukeiYear=2015&aggregateUnit=Q&serveyId=Q002005112015&statsId=T000876\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          {'地域メッシュ統計'}\n        </a>\n      </Typography>\n    </ul>\n  </section>\n);\n\nexport default MapAttribution;\n","module.exports = \"data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxwYXRoIGQ9Ik0xMiAyQzguMTMgMiA1IDUuMTMgNSA5YzAgNS4yNSA3IDEzIDcgMTNzNy03Ljc1IDctMTNjMC0zLjg3LTMuMTMtNy03LTd6bTAiIGZpbGw9IiMwMDkxRUEiIHN0cm9rZT0id2hpdGUiIHN0cm9rZS13aWR0aD0iMSIvPgogICAgPHBhdGggZD0iTTEyIDExLjVjLTEuMzggMC0yLjUtMS4xMi0yLjUtMi41czEuMTItMi41IDIuNS0yLjUgMi41IDEuMTIgMi41IDIuNS0xLjEyIDIuNS0yLjUgMi41eiIgZmlsbD0id2hpdGUiLz4KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiLz4KPC9zdmc+Cg==\""],"sourceRoot":""}