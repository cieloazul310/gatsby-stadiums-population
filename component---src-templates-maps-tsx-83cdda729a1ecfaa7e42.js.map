{"version":3,"sources":["webpack:///./src/utils/tileTree.ts","webpack:///./src/components/MeshFeature.tsx","webpack:///./src/components/GrayScaleFilter.tsx","webpack:///./src/components/MapApp.tsx","webpack:///./src/components/BuffersArcs.tsx","webpack:///./src/templates/maps.tsx","webpack:///./.cache/gatsby-browser-entry.js","webpack:///./.cache/public-page-renderer.js","webpack:///./.cache/public-page-renderer-prod.js","webpack:///./src/components/TableApp.tsx","webpack:///./src/utils/types.ts","webpack:///./src/utils/withRoot.tsx","webpack:///./src/image/place.svg"],"names":["TileSet","options","this","tileUrl","url","tileTree","treeIncludesTile","tile","x","y","z","hasOwnProperty","toString","tile2tree","_x$toString","_this$tileTree$z$toSt","_this$tileTree$z$toSt2","fetchTiles","tiles","_this","Promise","resolve","tasks","map","fetchTile","all","then","data","_this2","fetchUrl","replace","fetch","res","ok","Error","blob","tileWithURL","Object","assign","URL","createObjectURL","catch","undefined","isRequireFetch","_this3","every","setTileUrlFromTree","_this4","filter","updateTiles","_callee","newTiles","tilesInTree","tilesShouldFetch","fetchedTiles","_this5","regenerator_default","a","wrap","_context","prev","next","sent","abrupt","concat","stop","colorScale","scaleSequential","interpolateSpectral","domain","sizeScale","scalePow","range","exponent","MeshRect","props","feature","projection","val","properties","center","geometry","coordinates","size","Math","abs","max","scale","core_browser_esm","fill","fillOpacity","width","height","style","mixBlendMode","filterMatrix","GrayScaleFilter","id","type","values","join","d3tile","require","Map","state","fetchStatus","_tileSet","_getTileCoordinates","_this$props","PI","translate","v","index","array","mag","_fetchTiles","componentDidMount","render","_this$props2","classes","buffers","geojson","mapState","popVisibility","bufferVisibility","zoomLevel","geoMercator","fitExtent","path","geoPath","tileCoords","renderTiles","setState","className","root","components_GrayScaleFilter","opacity","key","xlinkHref","points","features","MeshFeature","bb","bbox","lb","buffer","d","stroke","strokeWidth","dy","textAnchor","fontWeight","radius","Place","transform","React","withStyles","theme","createStyles","&:hover","color","themes","min","dirs","str","direction","items","arr","directions","angle","length","startAngle","indexOf","endAngle","from","to","buffersToDirection","dir","item","i","arc","d3arc","outerRadius","innerRadius","padAngle","pow","MapPage","location","drawerOpen","initialAppState","handleDrawerToggle","handlePopVisibility","handleBufferVisibility","_this$state","tableState","edges","allVenuesJson","_data$venuesJson","venuesJson","summary","topojson","topofeature","objects","others","sortData","ascSort","sortKey","sortProp","name","radius1000","radius3000","radius5000","radius10000","slug","drawer","toolbar","List_default","subheader","ListSubheader_default","ListItem_default","button","onClick","navigate","ListItemIcon_default","icons_List_default","ListItemText_default","Divider_default","selected","ZoomIn_default","ZoomOut_default","Landscape_default","People_default","ListItemSecondaryAction_default","Switch_default","onChange","checked","Adjust_default","createSortString","edge","node","primary","Typography_default","itemTitle","secondary","component","itemNumber","toLocaleString","Helmet_default","content","property","AppBar_default","appBar","position","Toolbar_default","IconButton_default","menuButton","aria-owns","aria-haspopup","Menu_default","apptitle","variant","currentIndex","ArrowForward_default","Hidden_default","mdUp","implementation","Drawer_default","open","onClose","paper","drawerPaper","smDown","autoSizerWrapper","es","_ref","MapApp","description","buffersWrapper","disableHeight","_ref2","BuffersArcs","gatsby_browser_entry","withRoot","_drawer","_appBar","_menuButton","display","breakpoints","up","flexShrink","marginLeft","marginRight","mixins","fontSize","textAlign","flexGrow","paddingTop","maxWidth","margin","padding","spacing","unit","query","StaticQueryContext","createContext","StaticQuery","_emotion_core__WEBPACK_IMPORTED_MODULE_0__","Consumer","staticQueryData","children","graphql","propTypes","PropTypes","object","string","isRequired","func","m","module","exports","default","ProdPageRenderer","pageResources","loader","getResourcesForPathnameSync","pathname","createElement","InternalPageRenderer","json","shape","TableApp","anchorEl","appState","menuOpen","_handleSort","prevState","title","_emotion_core__WEBPACK_IMPORTED_MODULE_5__","_material_ui_core_Paper__WEBPACK_IMPORTED_MODULE_15___default","_material_ui_core_Toolbar__WEBPACK_IMPORTED_MODULE_8___default","flex","_material_ui_core_Typography__WEBPACK_IMPORTED_MODULE_27___default","_material_ui_core_Tooltip__WEBPACK_IMPORTED_MODULE_16___default","_material_ui_core_IconButton__WEBPACK_IMPORTED_MODULE_17___default","buttonRef","_material_ui_icons_FilterList__WEBPACK_IMPORTED_MODULE_18___default","_material_ui_core_Popper__WEBPACK_IMPORTED_MODULE_19___default","filterMenuWrapper","transition","disablePortal","placement","TransitionProps","_material_ui_core_Grow__WEBPACK_IMPORTED_MODULE_20___default","_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_2___default","transformOrigin","_material_ui_core_ClickAwayListener__WEBPACK_IMPORTED_MODULE_21___default","onClickAway","event","contains","target","_material_ui_core_MenuList__WEBPACK_IMPORTED_MODULE_22___default","_material_ui_core_MenuItem__WEBPACK_IMPORTED_MODULE_23___default","_material_ui_core_ListItemIcon__WEBPACK_IMPORTED_MODULE_24___default","_material_ui_icons_CheckCircle__WEBPACK_IMPORTED_MODULE_26___default","_material_ui_core_ListItemText__WEBPACK_IMPORTED_MODULE_25___default","inset","tableWrapper","_material_ui_core_Table__WEBPACK_IMPORTED_MODULE_9___default","table","_material_ui_core_TableHead__WEBPACK_IMPORTED_MODULE_12___default","_material_ui_core_TableRow__WEBPACK_IMPORTED_MODULE_13___default","_material_ui_core_TableCell__WEBPACK_IMPORTED_MODULE_11___default","indexCell","align","nameCell","_material_ui_core_TableSortLabel__WEBPACK_IMPORTED_MODULE_14___default","active","_material_ui_core_TableBody__WEBPACK_IMPORTED_MODULE_10___default","datum","scope","gatsby__WEBPACK_IMPORTED_MODULE_7__","isAsc","sortProperty","sort","b","marginTop","minWidth","overflowX","zIndex","__webpack_require__","__webpack_exports__","createMuiTheme","typography","useNextVariants","Component","_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_2__","_material_ui_core_CssBaseline__WEBPACK_IMPORTED_MODULE_3___default"],"mappings":"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","file":"component---src-templates-maps-tsx-83cdda729a1ecfaa7e42.js","sourcesContent":["import fetch from 'isomorphic-fetch';\n\nexport interface Tile {\n  id: string;\n  x: number;\n  y: number;\n  z: number;\n  tx: number;\n  ty: number;\n  scale: number;\n  translate: [number, number];\n  mag: number;\n}\n\ntype TileUrl = string | undefined;\n\nexport interface TileWithURL extends Tile {\n  url: TileUrl;\n}\n\nexport interface TileTree {\n  [key: string]: {\n    [key: string]: {\n      [key: string]: TileUrl;\n    };\n  };\n}\n\ninterface TileSetOptions {\n  url?: string;\n}\n\nclass TileSet {\n  readonly tileTree: TileTree;\n  readonly tileUrl: string;\n  constructor(options: TileSetOptions = {}) {\n    this.tileUrl = options.url || '//cyberjapandata.gsi.go.jp/xyz/std/{z}/{x}/{y}.png';\n    this.tileTree = {};\n  }\n\n  private treeIncludesTile(tile: Tile): boolean {\n    const { x, y, z } = tile;\n    return (\n      this.tileTree.hasOwnProperty(z.toString()) &&\n      this.tileTree[z.toString()].hasOwnProperty(x.toString()) &&\n      this.tileTree[z.toString()][x.toString()].hasOwnProperty(y.toString())\n    );\n  }\n\n  private tile2tree(tile: TileWithURL) {\n    const { x, y, z, url } = tile;\n    if (!this.tileTree.hasOwnProperty(z.toString())) {\n      this.tileTree[z.toString()] = {\n        [x.toString()]: {\n          [y.toString()]: url\n        }\n      };\n    } else if (!this.tileTree[z.toString()].hasOwnProperty(x.toString())) {\n      this.tileTree[z.toString()][x.toString()] = {\n        [y.toString()]: url\n      };\n    } else {\n      this.tileTree[z.toString()][x.toString()][y.toString()] = url;\n    }\n  }\n  // fetch new tiles\n  private fetchTiles(tiles: Tile[]): Promise<TileWithURL[]> {\n    return new Promise(resolve => {\n      const tasks = tiles.map(tile => this.fetchTile(tile, this.tileUrl));\n      Promise.all(tasks).then((data: TileWithURL[]) => {\n        resolve(data);\n      });\n    });\n  }\n  private fetchTile(tile: Tile, url: string): Promise<TileWithURL> {\n    const { x, y, z } = tile;\n    const fetchUrl = url.replace('{z}/{x}/{y}', `${z}/${x}/${y}`);\n\n    return fetch(fetchUrl)\n      .then(res => {\n        if (!res.ok) throw new Error();\n        return res.blob();\n      })\n      .then(blob => {\n        const tileWithURL: TileWithURL = {\n          ...tile,\n          url: URL.createObjectURL(blob)\n        };\n        this.tile2tree(tileWithURL);\n        return tileWithURL;\n      })\n      .catch(() => {\n        const tileWithURL: TileWithURL = {\n          ...tile,\n          url: undefined\n        };\n        this.tile2tree(tileWithURL);\n        return tileWithURL;\n      });\n  }\n\n  // helpers\n\n  public isRequireFetch(tiles: Tile[]): boolean {\n    return !tiles.every(tile => this.treeIncludesTile(tile));\n  }\n\n  public setTileUrlFromTree(tiles: Tile[]): TileWithURL[] {\n    return tiles\n      .filter(tile => this.treeIncludesTile(tile))\n      .map(tile => ({\n        ...tile,\n        url: this.tileTree[tile.z][tile.x][tile.y]\n      }));\n  }\n\n  public async updateTiles(newTiles: Tile[]) {\n    const tilesInTree = this.setTileUrlFromTree(newTiles.filter(tile => this.treeIncludesTile(tile)));\n\n    const tilesShouldFetch = newTiles.filter(tile => !this.treeIncludesTile(tile));\n\n    const fetchedTiles: TileWithURL[] = await this.fetchTiles(tilesShouldFetch);\n\n    return [...tilesInTree, ...fetchedTiles];\n  }\n}\n\nexport default TileSet;\n","import * as React from 'react';\nimport { scaleLinear, scalePow, scaleSequential } from 'd3-scale';\nimport { interpolateSpectral } from 'd3-scale-chromatic';\nimport { Feature, Point } from '@turf/helpers';\nimport { GeoProjection } from 'd3-geo';\n\nimport { MeshProperties } from '../utils/types';\n\ninterface Props {\n  feature: Feature<Point, MeshProperties>;\n  projection: GeoProjection;\n}\n\nconst colorScale = scaleSequential(interpolateSpectral).domain([1000, 0]);\n\nconst sizeScale = scalePow()\n  .domain([0, 1000])\n  .range([0, 8])\n  .exponent(0.5);\n\nconst MeshRect: React.FunctionComponent<Props> = (props: Props) => {\n  const { feature, projection } = props;\n  const { val } = feature.properties;\n  const center = projection(feature.geometry.coordinates);\n  const size = Math.abs(sizeScale(val) * Math.max(1, projection.scale() / 125000));\n\n  return (\n    <rect\n      fill={colorScale(val)}\n      fillOpacity={0.6}\n      x={center[0] - size / 2}\n      y={center[1] - size / 2}\n      width={size}\n      height={size}\n      style={{ mixBlendMode: 'multiply' }}\n    />\n  );\n};\n\nexport default MeshRect;\n","import * as React from 'react';\n/*\nconst filterMatrix = [\n  \"0.3333 0.3333 0.3333 0 0\",\n  \"0.3333 0.3333 0.3333 0 0\",\n  \"0.3333 0.3333 0.3333 0 0\",\n  \"0 0 0 1 0\"\n];\n*/\nconst filterMatrix = ['0.3333 0.3333 0.3333 0 0', '0.3333 0.3333 0.3333 0 0', '0.3333 0.3333 0.3333 0 0', '0 0 0 1 0'];\n\ninterface Props {\n  id: string;\n}\n\nconst GrayScaleFilter: React.FunctionComponent<Props> = (props: Props) => (\n  <filter id={props.id}>\n    <feColorMatrix type=\"matrix\" values={filterMatrix.join(' ')} />\n  </filter>\n);\n\nexport default GrayScaleFilter;\n","import * as React from 'react';\nimport { Theme } from '@material-ui/core/styles/createMuiTheme';\nimport withStyles, { WithStyles, StyleRules } from '@material-ui/core/styles/withStyles';\nimport createStyles from '@material-ui/core/styles/createStyles';\nconst d3tile = require('d3-tile').tile;\n\nimport bbox from '@turf/bbox';\nimport { geoMercator, geoPath, GeoProjection, GeoPath } from 'd3-geo';\nimport TileSet, { Tile, TileWithURL } from '../utils/tileTree';\nimport MeshFeature from '../components/MeshFeature';\nimport GrayScaleFilter from '../components/GrayScaleFilter';\nimport { Feature, Point } from '@turf/helpers';\nimport { Buffer, MeshProperties, MapState } from '../utils/types';\n\nimport Place from '../image/place.svg';\n\nconst styles = (theme: Theme): StyleRules =>\n  createStyles({\n    root: {},\n    tiles: {\n      //transition: 'opacity 1s'\n    },\n    buffer: {\n      opacity: 0.2,\n      '&:hover': {\n        opacity: 1\n      }\n    },\n    points: {\n      mixBlendMode: 'multiply'\n      //transition: 'opacity 1s .5s'\n    }\n  });\n\ninterface D3TileArray<T> extends Array<T> {\n  scale: number;\n  translate: [number, number];\n}\n\ninterface Props extends WithStyles<typeof styles> {\n  width: number;\n  height: number;\n  mapState: MapState;\n  geojson: {\n    type: 'FeatureCollection';\n    features: Feature<Point, MeshProperties>[];\n  };\n  buffers: Buffer[];\n}\n\ninterface State {\n  readonly fetchStatus?: 'yet' | 'fetching' | 'fetched';\n}\n\nclass Map extends React.Component<Props, State> {\n  readonly state: State = {\n    fetchStatus: 'yet'\n  };\n  _tileSet = new TileSet();\n  // Tile Maps\n  // slope: //cyberjapandata.gsi.go.jp/xyz/slopemap/{z}/{x}/{y}.png\n\n  private _getTileCoordinates = (projection: GeoProjection): Tile[] => {\n    const { width, height } = this.props;\n    const mag: number = 1.5;\n\n    const tiles: Tile[] = d3tile()\n      .size([width * mag, height * mag])\n      .scale(projection.scale() * 2 * Math.PI * mag)\n      .translate(projection([0, 0]).map(v => v * mag))()\n      .map((tile: { x: number; y: number; z: number }, index: number, array: D3TileArray<Tile>) => ({\n        ...tile,\n        mag,\n        id: `${tile.z}/${tile.x}/${tile.y}`,\n        scale: array.scale,\n        translate: array.translate\n      }));\n\n    return tiles;\n  };\n\n  private _fetchTiles = (tiles: Tile[]) => {\n    return this._tileSet.updateTiles(tiles);\n  };\n\n  componentDidMount() {}\n\n  public render() {\n    const { classes, buffers, geojson, mapState } = this.props;\n    const { popVisibility, bufferVisibility, zoomLevel } = mapState;\n    const width = this.props.width || 400;\n    const height = this.props.height || 400;\n    const projection = buffers ? geoMercator().fitExtent([[10, 40], [width - 10, height - 40]], buffers[zoomLevel]) : geoMercator();\n\n    const path: GeoPath = geoPath(projection);\n    const tileCoords = this._getTileCoordinates(projection);\n\n    let renderTiles: TileWithURL[] = this._tileSet.setTileUrlFromTree(tileCoords);\n\n    if (this._tileSet.isRequireFetch(tileCoords)) {\n      this._fetchTiles(tileCoords).then(newTiles => {\n        this.setState({ fetchStatus: 'fetched' });\n      });\n    }\n\n    return (\n      <svg className={classes.root} width={width} height={height}>\n        <g>\n          <GrayScaleFilter id=\"grayscale\" />\n          <g filter=\"url(#grayscale)\" className={classes.tiles} style={{ opacity: this.state.fetchStatus === 'fetched' ? 1 : 0 }}>\n            {renderTiles.map((tile, index) => (\n              <image\n                key={index}\n                xlinkHref={tile.url}\n                x={((tile.x + tile.translate[0]) * tile.scale) / tile.mag}\n                y={((tile.y + tile.translate[1]) * tile.scale) / tile.mag}\n                width={tile.scale / tile.mag}\n                height={tile.scale / tile.mag}\n              />\n            ))}\n          </g>\n        </g>\n        {popVisibility ? (\n          <g className={classes.points} style={{ opacity: this.state.fetchStatus === 'fetched' ? 1 : 0 }}>\n            {geojson\n              ? geojson.features.map((feature, index) =>\n                  feature.geometry.type === 'Point' ? <MeshFeature key={index} feature={feature} projection={projection} /> : null\n                )\n              : null}\n          </g>\n        ) : null}\n        {bufferVisibility ? (\n          <g>\n            {buffers\n              ? buffers.map((feature, index) => {\n                  const bb = bbox(feature);\n                  const lb = projection([bb[2] + (bb[0] - bb[2]) / 2, bb[1]]);\n                  return (\n                    <g key={index} className={classes.buffer}>\n                      <path d={path(feature) || undefined} fill=\"none\" stroke=\"rgb(200, 60, 80)\" strokeWidth={3} />\n                      <text x={lb[0]} y={lb[1]} dy=\"1em\" textAnchor=\"middle\" fill=\"rgb(200, 60, 80)\" style={{ fontWeight: 'bold' }}>\n                        {feature.properties.radius}\n                      </text>\n                    </g>\n                  );\n                })\n              : null}\n          </g>\n        ) : null}\n        <g>\n          <image xlinkHref={Place} x={width / 2} y={height / 2} width={28} height={28} transform=\"translate(-14, -26)\" />\n        </g>\n      </svg>\n    );\n  }\n}\n\nexport default withStyles(styles)(Map);\n","import * as React from 'react';\nimport { Theme } from '@material-ui/core/styles/createMuiTheme';\nimport withStyles, { WithStyles, StyleRules } from '@material-ui/core/styles/withStyles';\nimport { arc as d3arc } from 'd3-shape';\nimport { scaleSequential } from 'd3-scale';\nimport { interpolateSpectral } from 'd3-scale-chromatic';\n\nimport { Buffer } from '../utils/types';\n\nconst styles = (themes: Theme): StyleRules => ({\n  root: {}\n});\n\ninterface Props extends WithStyles<typeof styles> {\n  width: number;\n  buffers: Buffer[];\n}\n\nconst color = scaleSequential(interpolateSpectral).domain([10000, 0]);\n\nconst BufferArcs: React.FunctionComponent<Props> = (props: Props) => {\n  const { classes, buffers, width } = props;\n  const size = Math.min(width, 600);\n  const dirs = buffersToDirection(buffers);\n\n  return (\n    <svg className={classes.root} width={size} height={size}>\n      <g transform={`translate(${size / 2}, ${size / 2})`}>\n        {dirs.map((dir, index) => (\n          <g key={index}>\n            {dir.items.map((item, i) => {\n              const arc = d3arc()\n                .outerRadius(((size - 48) * (i + 2)) / 10)\n                .innerRadius(((size - 48) * (i + 1)) / 10 + 4)\n                .padAngle(0.02);\n              return (\n                <g key={i}>\n                  <path d={arc(item)} fill={color(calcDensity(item.val, item.from, item.to))} fillOpacity={item.val ? 1 : 0.1} />\n                </g>\n              );\n            })}\n          </g>\n        ))}\n      </g>\n      <g>\n        <text x={size / 2} dy=\"1em\" textAnchor=\"middle\">\n          北\n        </text>\n        <text x={size / 2} y={size} textAnchor=\"middle\">\n          南\n        </text>\n        <text y={size / 2} dy=\".5em\" textAnchor=\"start\">\n          西\n        </text>\n        <text x={size} y={size / 2} dy=\".5em\" textAnchor=\"end\">\n          東\n        </text>\n      </g>\n    </svg>\n  );\n};\n\nexport default withStyles(styles)(BufferArcs);\n\n// utils\n\nfunction buffersToDirection(buffers: Buffer[]) {\n  const directions = ['north', 'northeast', 'east', 'southeast', 'south', 'southwest', 'west', 'northwest'];\n  const dirObjs = directions.map(str => ({\n    direction: str,\n    items: buffers.map((feature, index, arr) => ({\n      ...directionToAngle(str),\n      from: index > 0 ? arr[index - 1].properties.radius : 0,\n      to: feature.properties.radius,\n      val: index > 0 ? feature.properties[str] - arr[index - 1].properties[str] : feature.properties[str]\n    }))\n  }));\n  return dirObjs;\n}\n\nfunction directionToAngle(key: string) {\n  const directions = ['north', 'northeast', 'east', 'southeast', 'south', 'southwest', 'west', 'northwest'];\n  const angle = (Math.PI * 2) / directions.length;\n  return {\n    startAngle: directions.indexOf(key) * angle - angle / 2,\n    endAngle: directions.indexOf(key) * angle + angle / 2\n  };\n}\n\nfunction calcDensity(val: number, from: number, to: number) {\n  return from === 0\n    ? (val * 8) / (Math.pow(to / 1000, 2) * Math.PI)\n    : (val * 8) / (Math.pow(to / 1000, 2) * Math.PI - Math.pow(from / 1000, 2) * Math.PI);\n}\n","import * as React from 'react';\nimport { graphql, Link, navigate } from 'gatsby';\nimport Helmet from 'react-helmet';\nimport AppBar from '@material-ui/core/AppBar';\nimport ToolBar from '@material-ui/core/Toolbar';\nimport Drawer from '@material-ui/core/Drawer';\nimport Hidden from '@material-ui/core/Hidden';\nimport IconButton from '@material-ui/core/IconButton';\nimport Menu from '@material-ui/icons/Menu';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport Switch from '@material-ui/core/Switch';\nimport Divider from '@material-ui/core/Divider';\nimport ArrowForward from '@material-ui/icons/ArrowForward';\nimport Typography from '@material-ui/core/Typography';\n// styles\nimport { Theme } from '@material-ui/core/styles/createMuiTheme';\nimport withStyles, { WithStyles, StyleRules } from '@material-ui/core/styles/withStyles';\nimport createStyles from '@material-ui/core/styles/createStyles';\n// icons\nimport ZoomIn from '@material-ui/icons/ZoomIn';\nimport ZoomOut from '@material-ui/icons/ZoomOut';\nimport ListIcon from '@material-ui/icons/List';\nimport PeopleIcon from '@material-ui/icons/People';\nimport Adjust from '@material-ui/icons/Adjust';\nimport LandScape from '@material-ui/icons/Landscape';\n\nimport { AutoSizer } from 'react-virtualized';\nimport { feature as topofeature } from 'topojson-client';\nimport { Topology } from 'topojson-specification';\n\nimport MapApp from '../components/MapApp';\nimport { sortData } from '../components/TableApp';\nimport BufferArcs from '../components/BuffersArcs';\nimport { Summary, LocationWithState, VenueEdge, MapState, initialAppState, TableState } from '../utils/types';\nimport withRoot from '../utils/withRoot';\n\nconst drawerWidth = 240;\n\nconst styles = (theme: Theme): StyleRules =>\n  createStyles({\n    root: {\n      display: 'flex'\n    },\n    drawer: {\n      [theme.breakpoints.up('md')]: {\n        width: drawerWidth,\n        flexShrink: 0\n      }\n    },\n    appBar: {\n      marginLeft: drawerWidth,\n      [theme.breakpoints.up('md')]: {\n        width: `calc(100% - ${drawerWidth}px)`\n      }\n    },\n    menuButton: {\n      marginRight: 20,\n      [theme.breakpoints.up('md')]: {\n        display: 'none'\n      }\n    },\n    toolbar: theme.mixins.toolbar,\n    drawerPaper: {\n      width: drawerWidth\n    },\n    itemTitle: {\n      fontSize: '80%',\n      fontWeight: 'bold'\n    },\n    itemNumber: {\n      textAlign: 'right'\n    },\n    content: {\n      flexGrow: 1,\n      paddingTop: 56\n    },\n    apptitle: {\n      flexGrow: 1\n    },\n    autoSizerWrapper: {\n      height: 'calc(100vh - 56px)'\n    },\n    buffersWrapper: {\n      width: '100%',\n      maxWidth: 600,\n      margin: 'auto'\n    },\n    description: {\n      maxWidth: 800,\n      margin: 'auto',\n      padding: theme.spacing.unit * 3\n    }\n  });\n\ninterface Props extends WithStyles<typeof styles> {\n  data: {\n    allVenuesJson: {\n      edges: Array<VenueEdge>;\n    };\n    venuesJson: {\n      fields: {\n        slug: string;\n      };\n      summary: Summary;\n      topojson: Topology;\n    };\n  };\n  location: LocationWithState;\n}\n\ninterface State extends MapState {\n  readonly drawerOpen: boolean;\n}\n\nclass MapPage extends React.Component<Props, State> {\n  readonly state = this.props.location.state\n    ? {\n        ...this.props.location.state.mapState,\n        drawerOpen: false\n      }\n    : {\n        ...initialAppState.mapState,\n        drawerOpen: false\n      };\n  private handleDrawerToggle = () => {\n    this.setState(prev => ({\n      drawerOpen: !prev.drawerOpen\n    }));\n  };\n  private handlePopVisibility = () => {\n    this.setState(prev => ({\n      popVisibility: !prev.popVisibility\n    }));\n  };\n  private handleBufferVisibility = () => {\n    this.setState(prev => ({\n      bufferVisibility: !prev.bufferVisibility\n    }));\n  };\n\n  public render() {\n    const { classes, data, location } = this.props;\n    const { popVisibility, bufferVisibility, zoomLevel } = this.state;\n    const tableState = location.state ? location.state.tableState : initialAppState.tableState;\n    const { edges } = data.allVenuesJson;\n    const { summary, topojson } = data.venuesJson;\n    const geojson = topofeature(topojson, topojson.objects.points);\n    const buffers = topofeature(topojson, topojson.objects.buffers).features;\n    const others = sortData(edges, tableState.ascSort, tableState.sortKey);\n    const sortProp =\n      tableState.sortKey === 0\n        ? 'radius1000'\n        : tableState.sortKey === 1\n        ? 'radius3000'\n        : tableState.sortKey === 2\n        ? 'radius5000'\n        : 'radius10000';\n\n    const { name, radius1000, radius3000, radius5000, radius10000, slug } = summary;\n    const drawer = (\n      <div>\n        <div className={classes.toolbar} />\n        <List subheader={<ListSubheader>地図</ListSubheader>}>\n          <ListItem\n            button\n            onClick={() => {\n              navigate('/', { state: { tableState, mapState: { popVisibility, bufferVisibility, zoomLevel } } });\n            }}\n          >\n            <ListItemIcon>\n              <ListIcon />\n            </ListItemIcon>\n            <ListItemText>表に戻る</ListItemText>\n          </ListItem>\n          <Divider />\n          <ListItem\n            button\n            selected={zoomLevel === 0}\n            onClick={() => {\n              this.setState(prev => ({ zoomLevel: prev.zoomLevel !== 0 ? prev.zoomLevel - 1 : prev.zoomLevel }));\n            }}\n          >\n            <ListItemIcon>\n              <ZoomIn />\n            </ListItemIcon>\n            <ListItemText>地図を拡大</ListItemText>\n          </ListItem>\n          <ListItem\n            button\n            selected={zoomLevel === 3}\n            onClick={() => {\n              this.setState(prev => ({ zoomLevel: prev.zoomLevel !== 3 ? prev.zoomLevel + 1 : prev.zoomLevel }));\n            }}\n          >\n            <ListItemIcon>\n              <ZoomOut />\n            </ListItemIcon>\n            <ListItemText>地図を縮小</ListItemText>\n          </ListItem>\n          <ListItem button>\n            <ListItemIcon>\n              <LandScape />\n            </ListItemIcon>\n            <ListItemText>地形モード</ListItemText>\n          </ListItem>\n          <ListItem>\n            <ListItemIcon>\n              <PeopleIcon />\n            </ListItemIcon>\n            <ListItemText>人口</ListItemText>\n            <ListItemSecondaryAction>\n              <Switch onChange={this.handlePopVisibility} checked={popVisibility} />\n            </ListItemSecondaryAction>\n          </ListItem>\n          <ListItem>\n            <ListItemIcon>\n              <Adjust />\n            </ListItemIcon>\n            <ListItemText>距離円</ListItemText>\n            <ListItemSecondaryAction>\n              <Switch onChange={this.handleBufferVisibility} checked={bufferVisibility} />\n            </ListItemSecondaryAction>\n          </ListItem>\n          <Divider />\n        </List>\n        <List subheader={<ListSubheader>{`一覧 ${createSortString(tableState)}`}</ListSubheader>}>\n          {others.map(edge => (\n            <ListItem\n              key={edge.node.summary.slug}\n              button\n              selected={edge.node.summary.slug === slug}\n              onClick={() => {\n                navigate(`/${edge.node.summary.slug}/`, {\n                  state: { tableState, mapState: { popVisibility, bufferVisibility, zoomLevel } }\n                });\n              }}\n            >\n              <ListItemText\n                primary={<Typography className={classes.itemTitle}>{edge.node.summary.name}</Typography>}\n                secondary={\n                  <Typography component=\"span\" className={classes.itemNumber}>\n                    {edge.node.summary[sortProp].toLocaleString()}\n                  </Typography>\n                }\n              />\n            </ListItem>\n          ))}\n        </List>\n      </div>\n    );\n\n    return (\n      <div className={classes.root}>\n        <Helmet>\n          <title>{summary.name}周辺の人口 | サッカースタジアムと人口</title>\n          <meta name=\"description\" content={`${summary.name}周辺の人口を表示した地図`} />\n          <meta property=\"og:type\" content=\"article\" />\n        </Helmet>\n        <AppBar className={classes.appBar} position=\"fixed\">\n          <ToolBar>\n            <IconButton\n              className={classes.menuButton}\n              aria-owns=\"menu\"\n              aria-haspopup=\"true\"\n              onClick={this.handleDrawerToggle}\n              color=\"inherit\"\n            >\n              <Menu />\n            </IconButton>\n            <Typography color=\"inherit\" className={classes.apptitle} variant=\"h6\">\n              {name}\n            </Typography>\n            <IconButton\n              aria-owns=\"next\"\n              aria-haspopup=\"true\"\n              onClick={() => {\n                const currentIndex = others.map(edge => edge.node.summary.slug).indexOf(slug);\n                const next = currentIndex === others.length - 1 ? others[0] : others[currentIndex + 1];\n                navigate(`/${next.node.summary.slug}/`, {\n                  state: { tableState, mapState: { popVisibility, bufferVisibility, zoomLevel } }\n                });\n              }}\n              color=\"inherit\"\n            >\n              <ArrowForward />\n            </IconButton>\n          </ToolBar>\n        </AppBar>\n        <nav className={classes.drawer}>\n          {/* The implementation can be swapped with js to avoid SEO duplication of links. */}\n          <Hidden mdUp implementation=\"css\">\n            <Drawer\n              variant=\"temporary\"\n              open={this.state.drawerOpen}\n              onClose={this.handleDrawerToggle}\n              classes={{\n                paper: classes.drawerPaper\n              }}\n            >\n              {drawer}\n            </Drawer>\n          </Hidden>\n          <Hidden smDown implementation=\"css\">\n            <Drawer\n              classes={{\n                paper: classes.drawerPaper\n              }}\n              variant=\"permanent\"\n              open\n            >\n              {drawer}\n            </Drawer>\n          </Hidden>\n        </nav>\n        <div className={classes.content}>\n          <div className={classes.autoSizerWrapper}>\n            <AutoSizer>\n              {({ width, height }) => (\n                <MapApp\n                  width={width}\n                  height={height}\n                  geojson={geojson}\n                  buffers={buffers}\n                  mapState={{ popVisibility, bufferVisibility, zoomLevel }}\n                />\n              )}\n            </AutoSizer>\n          </div>\n          <div className={classes.description}>\n            <Typography variant=\"h5\">{name}</Typography>\n            <div className={classes.buffersWrapper}>\n              <AutoSizer disableHeight>{({ width }) => <BufferArcs buffers={buffers} width={width} />}</AutoSizer>\n            </div>\n            <ul>\n              <li>{`1km: ${radius1000}`}</li>\n              <li>{`3km: ${radius3000}`}</li>\n              <li>{`5km: ${radius5000}`}</li>\n              <li>{`10km: ${radius10000}`}</li>\n            </ul>\n            <Link to=\"/\" state={this.props.location.state}>\n              トップに戻る\n            </Link>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default withRoot(withStyles(styles)(MapPage));\n\n// helper\nfunction createSortString(tableState: TableState): string {\n  const { ascSort, sortKey } = tableState;\n  const sortRule = ascSort ? '昇順' : '降順';\n  const sortLabel = ['1km', '3km', '5km', '10km'][sortKey];\n\n  return `${sortLabel}圏内人口 ${sortRule}`;\n}\n\nexport const query = graphql`\n  query($slug: String!) {\n    allVenuesJson {\n      edges {\n        node {\n          summary {\n            slug\n            name\n            radius1000\n            radius3000\n            radius5000\n            radius10000\n          }\n        }\n      }\n    }\n    venuesJson(fields: { slug: { eq: $slug } }) {\n      fields {\n        slug\n      }\n      summary {\n        name\n        shortname\n        category\n        radius1000\n        radius3000\n        radius5000\n        radius10000\n        slug\n      }\n      topojson {\n        type\n        transform {\n          scale\n          translate\n        }\n        objects {\n          points {\n            type\n            geometries {\n              type\n              coordinates\n              properties {\n                id\n                val\n              }\n            }\n          }\n          buffers {\n            type\n            geometries {\n              type\n              arcs\n              properties {\n                radius\n                population\n                north\n                northeast\n                east\n                southeast\n                south\n                southwest\n                west\n                northwest\n              }\n            }\n          }\n        }\n        arcs\n      }\n    }\n  }\n`;\n","import React from \"react\"\nimport PropTypes from \"prop-types\"\nimport Link, {\n  withPrefix,\n  navigate,\n  push,\n  replace,\n  navigateTo,\n} from \"gatsby-link\"\nimport PageRenderer from \"./public-page-renderer\"\nimport parsePath from \"./parse-path\"\n\nconst StaticQueryContext = React.createContext({})\n\nconst StaticQuery = props => (\n  <StaticQueryContext.Consumer>\n    {staticQueryData => {\n      if (\n        props.data ||\n        (staticQueryData[props.query] && staticQueryData[props.query].data)\n      ) {\n        return (props.render || props.children)(\n          props.data ? props.data.data : staticQueryData[props.query].data\n        )\n      } else {\n        return <div>Loading (StaticQuery)</div>\n      }\n    }}\n  </StaticQueryContext.Consumer>\n)\n\nStaticQuery.propTypes = {\n  data: PropTypes.object,\n  query: PropTypes.string.isRequired,\n  render: PropTypes.func,\n  children: PropTypes.func,\n}\n\nfunction graphql() {\n  throw new Error(\n    `It appears like Gatsby is misconfigured. Gatsby related \\`graphql\\` calls ` +\n      `are supposed to only be evaluated at compile time, and then compiled away,. ` +\n      `Unfortunately, something went wrong and the query was left in the compiled code.\\n\\n.` +\n      `Unless your site has a complex or custom babel/Gatsby configuration this is likely a bug in Gatsby.`\n  )\n}\n\nexport {\n  Link,\n  withPrefix,\n  graphql,\n  parsePath,\n  navigate,\n  push, // TODO replace for v3\n  replace, // TODO remove replace for v3\n  navigateTo, // TODO: remove navigateTo for v3\n  StaticQueryContext,\n  StaticQuery,\n  PageRenderer,\n}\n","const preferDefault = m => (m && m.default) || m\n\nif (process.env.BUILD_STAGE === `develop`) {\n  module.exports = preferDefault(require(`./public-page-renderer-dev`))\n} else if (process.env.BUILD_STAGE === `build-javascript`) {\n  module.exports = preferDefault(require(`./public-page-renderer-prod`))\n} else {\n  module.exports = () => null\n}\n","import React from \"react\"\nimport PropTypes from \"prop-types\"\n\nimport InternalPageRenderer from \"./page-renderer\"\nimport loader from \"./loader\"\n\nconst ProdPageRenderer = ({ location }) => {\n  const pageResources = loader.getResourcesForPathnameSync(location.pathname)\n  return React.createElement(InternalPageRenderer, {\n    location,\n    pageResources,\n    ...pageResources.json,\n  })\n}\n\nProdPageRenderer.propTypes = {\n  location: PropTypes.shape({\n    pathname: PropTypes.string.isRequired,\n  }).isRequired,\n}\n\nexport default ProdPageRenderer\n","import * as React from 'react';\nimport { Link } from 'gatsby';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport TableSortLabel from '@material-ui/core/TableSortLabel';\nimport Paper from '@material-ui/core/Paper';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport IconButton from '@material-ui/core/IconButton';\nimport FilterListIcon from '@material-ui/icons/FilterList';\nimport Popper from '@material-ui/core/Popper';\nimport Grow from '@material-ui/core/Grow';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport MenuList from '@material-ui/core/MenuList';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\nimport { Theme } from '@material-ui/core/styles/createMuiTheme';\nimport Typography from '@material-ui/core/Typography';\nimport withStyles, { WithStyles, StyleRules } from '@material-ui/core/styles/withStyles';\nimport createStyles from '@material-ui/core/styles/createStyles';\nimport { VenueEdge, AppState, TableState } from '../utils/types';\n\nconst tableStyles = (theme: Theme): StyleRules =>\n  createStyles({\n    root: {\n      width: '100%',\n      marginTop: theme.spacing.unit * 3\n    },\n    table: {\n      minWidth: 760\n    },\n    tableWrapper: {\n      overflowX: 'auto'\n    },\n    indexCell: {\n      width: '2em',\n      padding: '4px 8px 4px 8px'\n    },\n    nameCell: {\n      width: '16em',\n      padding: '4px 16px 4px 24px'\n    },\n    filterMenuWrapper: {\n      zIndex: 1\n    }\n  });\n\ninterface Summary {\n  name: string;\n  club: string;\n  category: string;\n  shortname: string;\n  slug: string;\n  radius1000: number;\n  radius3000: number;\n  radius5000: number;\n  radius10000: number;\n}\n\ninterface Props extends WithStyles<typeof tableStyles> {\n  title: string;\n  data: Array<VenueEdge>;\n  appState: AppState | null;\n}\n\ninterface State extends TableState {\n  readonly menuOpen: boolean;\n}\n\nclass TableApp extends React.Component<Props, State> {\n  private anchorEl: HTMLElement = undefined;\n  readonly state: State = this.props.appState\n    ? {\n        ...this.props.appState.tableState,\n        menuOpen: false\n      }\n    : {\n        ascSort: false,\n        sortKey: 3,\n        menuOpen: false\n      };\n\n  private _handleSort = (index: number) => {\n    this.setState(prevState => ({\n      ascSort: prevState.sortKey === index ? !prevState.ascSort : false,\n      sortKey: index\n    }));\n  };\n\n  public render() {\n    const { classes, title, data, appState } = this.props;\n    const { ascSort, sortKey, menuOpen } = this.state;\n    return (\n      <Paper className={classes.root}>\n        <Toolbar>\n          <div style={{ flex: '0 0 auto' }}>\n            <Typography variant=\"h6\">{title}</Typography>\n          </div>\n          <div style={{ flex: '1 1 100%' }} />\n          <div>\n            <div>\n              <Tooltip title=\"Filter\">\n                <IconButton\n                  aria-owns={menuOpen ? 'menu-list' : undefined}\n                  aria-haspopup=\"true\"\n                  buttonRef={node => {\n                    this.anchorEl = node;\n                  }}\n                  onClick={() => {\n                    this.setState(prev => ({ menuOpen: !prev.menuOpen }));\n                  }}\n                >\n                  <FilterListIcon />\n                </IconButton>\n              </Tooltip>\n              <Popper\n                className={classes.filterMenuWrapper}\n                anchorEl={this.anchorEl}\n                open={menuOpen}\n                transition\n                disablePortal\n                placement=\"bottom-end\"\n              >\n                {({ TransitionProps }) => (\n                  <Grow id=\"menu-list\" {...TransitionProps} style={{ transformOrigin: 'right top' }}>\n                    <Paper>\n                      <ClickAwayListener\n                        onClickAway={event => {\n                          if (this.anchorEl.contains(event.target)) {\n                            return;\n                          }\n                          this.setState({ menuOpen: false });\n                        }}\n                      >\n                        <MenuList>\n                          {['J1', 'J2', 'J3', 'JFL', '地域', 'その他'].map((str, index) => (\n                            <MenuItem key={index}>\n                              <ListItemIcon>\n                                <CheckCircleIcon />\n                              </ListItemIcon>\n                              <ListItemText inset primary={str} />\n                            </MenuItem>\n                          ))}\n                        </MenuList>\n                      </ClickAwayListener>\n                    </Paper>\n                  </Grow>\n                )}\n              </Popper>\n            </div>\n          </div>\n        </Toolbar>\n        <div className={classes.tableWrapper}>\n          <Table className={classes.table}>\n            <TableHead>\n              <TableRow>\n                <TableCell className={classes.indexCell} align=\"right\">\n                  i\n                </TableCell>\n                <TableCell className={classes.nameCell}>name</TableCell>\n                {['1km', '3km', '5km', '10km'].map((str, index) => (\n                  <TableCell key={index} align=\"right\">\n                    <TableSortLabel active={index === sortKey} direction={ascSort ? 'asc' : 'desc'} onClick={() => this._handleSort(index)}>\n                      {str}\n                    </TableSortLabel>\n                  </TableCell>\n                ))}\n              </TableRow>\n            </TableHead>\n            <TableBody>\n              {sortData(data, ascSort, sortKey).map((datum, index) => (\n                <TableRow key={index}>\n                  <TableCell className={classes.indexCell} component=\"th\" scope=\"row\" align=\"right\">\n                    {index + 1}\n                  </TableCell>\n                  <TableCell className={classes.nameCell} component=\"th\" scope=\"row\">\n                    <Link\n                      to={`/${datum.node.summary.slug}/`}\n                      state={{\n                        mapState: appState.mapState || null,\n                        tableState: {\n                          ascSort,\n                          sortKey\n                        }\n                      }}\n                    >\n                      {datum.node.summary.name}\n                    </Link>\n                  </TableCell>\n                  <TableCell align=\"right\">{datum.node.summary.radius1000.toLocaleString()}</TableCell>\n                  <TableCell align=\"right\">{datum.node.summary.radius3000.toLocaleString()}</TableCell>\n                  <TableCell align=\"right\">{datum.node.summary.radius5000.toLocaleString()}</TableCell>\n                  <TableCell align=\"right\">{datum.node.summary.radius10000.toLocaleString()}</TableCell>\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n        </div>\n      </Paper>\n    );\n  }\n}\n\nexport default withStyles(tableStyles)(TableApp);\n\n// utils\n\nexport function sortData(data: Array<{ node: { summary: Summary } }>, ascSort: boolean, sortKey: number) {\n  const isAsc = ascSort ? 1 : -1;\n  const sortProperty = sortKey === 0 ? 'radius1000' : sortKey === 1 ? 'radius3000' : sortKey === 2 ? 'radius5000' : 'radius10000';\n\n  return data.sort((a, b) => isAsc * (a.node.summary[sortProperty] - b.node.summary[sortProperty]));\n}\n","import { Feature, Polygon } from '@turf/helpers';\nimport { LocationProps } from '@reach/router';\n\nexport const initialAppState: AppState = {\n  tableState: {\n    ascSort: false,\n    sortKey: 3\n  },\n  mapState: {\n    popVisibility: true,\n    bufferVisibility: true,\n    zoomLevel: 3\n  }\n};\n\nexport interface TableState {\n  readonly ascSort: boolean;\n  readonly sortKey: number;\n}\n\nexport interface MapState {\n  readonly popVisibility: boolean;\n  readonly bufferVisibility: boolean;\n  readonly zoomLevel: number;\n}\n\nexport interface AppState {\n  tableState: TableState;\n  mapState: MapState;\n}\n\nexport interface LocationWithState extends LocationProps {\n  state: AppState | null;\n}\n\nexport interface Summary {\n  name: string;\n  club: string;\n  category: string;\n  shortname: string;\n  slug: string;\n  radius1000: number;\n  radius3000: number;\n  radius5000: number;\n  radius10000: number;\n}\n\nexport interface VenueEdge {\n  node: {\n    summary: Summary;\n  };\n}\n\nexport interface BufferPropertis extends EighthDirections {\n  name: string;\n  radius: number;\n  population: number;\n}\n\nexport type Buffer = Feature<Polygon, BufferPropertis>;\n\nexport interface MeshProperties {\n  id: number;\n  val: number;\n}\n\nexport interface ForthDirections {\n  north: number;\n  east: number;\n  south: number;\n  west: number;\n}\n\nexport interface EighthDirections extends ForthDirections {\n  northeast: number;\n  southeast: number;\n  southwest: number;\n  northwest: number;\n}\n","import * as React from 'react';\nimport { MuiThemeProvider, createMuiTheme } from '@material-ui/core/styles';\n//import lightblue from '@material-ui/core/colors/lightBlue';\n//import blueGrey from '@material-ui/core/colors/blueGrey';\nimport CssBaseline from '@material-ui/core/CssBaseline';\n\nexport const theme = createMuiTheme({\n  /*\n  palette: {\n    primary: lightblue,\n    secondary: blueGrey\n  },*/\n  typography: {\n    useNextVariants: true\n  }\n});\n\nfunction withRoot<P>(Component: React.ComponentType<P>) {\n  function WithRoot(props: P) {\n    return (\n      <MuiThemeProvider theme={theme}>\n        <CssBaseline />\n        <Component {...props} />\n      </MuiThemeProvider>\n    );\n  }\n\n  return WithRoot;\n}\n\nexport default withRoot;\n","module.exports = \"data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxwYXRoIGQ9Ik0xMiAyQzguMTMgMiA1IDUuMTMgNSA5YzAgNS4yNSA3IDEzIDcgMTNzNy03Ljc1IDctMTNjMC0zLjg3LTMuMTMtNy03LTd6bTAiIGZpbGw9IiMwMDkxRUEiIHN0cm9rZT0id2hpdGUiIHN0cm9rZS13aWR0aD0iMSIvPgogICAgPHBhdGggZD0iTTEyIDExLjVjLTEuMzggMC0yLjUtMS4xMi0yLjUtMi41czEuMTItMi41IDIuNS0yLjUgMi41IDEuMTIgMi41IDIuNS0xLjEyIDIuNS0yLjUgMi41eiIgZmlsbD0id2hpdGUiLz4KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiLz4KPC9zdmc+Cg==\""],"sourceRoot":""}