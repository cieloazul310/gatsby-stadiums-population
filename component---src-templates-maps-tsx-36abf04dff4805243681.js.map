{"version":3,"sources":["webpack:///./src/utils/tileTree.ts","webpack:///./src/components/MeshFeature.tsx","webpack:///./src/components/GrayScaleFilter.tsx","webpack:///./src/components/MapApp.tsx","webpack:///./src/components/drawer/MapHandler.tsx","webpack:///./src/components/fa-buttons/TwitterIcon.tsx","webpack:///./src/components/fa-buttons/FacebookIcon.tsx","webpack:///./src/components/drawer/SharesList.tsx","webpack:///./src/components/drawer/DrawerTable.tsx","webpack:///./src/components/ValuesTable.tsx","webpack:///./src/components/DrawerInner.tsx","webpack:///./src/components/MapLegends.tsx","webpack:///./src/components/TableApp.tsx","webpack:///./src/components/BuffersArcs.tsx","webpack:///./src/components/Attribution.tsx","webpack:///./src/templates/maps.tsx","webpack:///./.cache/gatsby-browser-entry.js","webpack:///./.cache/public-page-renderer.js","webpack:///./src/utils/types.ts","webpack:///./.cache/public-page-renderer-prod.js","webpack:///./src/utils/withRoot.tsx","webpack:///./src/utils/getPageContext.ts","webpack:///./src/image/place.svg"],"names":["TileSet","options","this","tileUrl","url","maxZoom","minZoom","tileTree","treeIncludesTile","tile","x","y","z","hasOwnProperty","toString","tile2tree","_x$toString","_this$tileTree$z$toSt","_this$tileTree$z$toSt2","fetchTiles","tiles","_this","Promise","resolve","tasks","map","fetchTile","all","then","data","_this2","fetchUrl","replace","fetch","res","ok","Error","blob","tileWithURL","Object","assign","URL","createObjectURL","catch","undefined","isRequireFetch","_this3","every","setTileUrlFromTree","_this4","filter","updateTiles","_callee","newTiles","tilesInTree","tilesShouldFetch","fetchedTiles","_this5","regenerator_default","a","wrap","_context","prev","next","sent","abrupt","concat","stop","colorScale","scaleSequential","interpolateSpectral","domain","sizeScale","scalePow","range","exponent","MeshRect","props","feature","projection","val","properties","center","geometry","coordinates","size","Math","abs","min","max","scale","react","fill","fillOpacity","width","height","style","mixBlendMode","filterMatrix","GrayScaleFilter","id","type","values","join","d3tile","require","Map","state","fetchStatus","_tileSet","_terrain","_getTileCoordinates","_this$props","mag","zoomer","log2","PI","pow","translate","v","index","array","_fetchTiles","tileSet","componentDidMount","render","_this$props2","classes","buffers","geojson","mapState","popVisibility","bufferVisibility","zoomLevel","terrain","geoMercator","fitExtent","path","geoPath","tileCoords","renderTiles","hoge","LinearProgress_default","className","progress","color","setState","root","components_GrayScaleFilter","opacity","key","xlinkHref","imageRendering","points","features","MeshFeature","bb","bbox","lb","buffer","d","stroke","strokeWidth","bufferText","dy","textAnchor","radius","Place","transform","React","withStyles","theme","createStyles","&:hover","fontSize","fontFamily","fontWeight","position","top","left","MapHandler","_ref","handleZoomIn","handleZoomOut","handleTerrain","handlePopVisibility","handleBufferVisibility","List_default","subheader","ListSubheader_default","Hidden_default","smDown","implementation","ListItem_default","button","selected","onClick","ListItemIcon_default","ZoomIn_default","ListItemText_default","ZoomOut_default","primary","LandScape_default","ListItemSecondaryAction_default","Switch_default","onChange","checked","People_default","Adjust_default","TwitterIcon","componentWillMount","library","add","faTwitter","Icon_default","react_fontawesome_index_es","icon","FacebookIcon","faFacebook","SharesList","summary","component","href","createTwiterShareUrl","target","rel","fa_buttons_TwitterIcon","createFbShareUrl","fa_buttons_FacebookIcon","encodeURI","name","encodeURIComponent","slug","styles","itemTitle","itemNumber","textAlign","tableState","ascSort","sortKey","sortRule","sortLabel","edges","appState","edge","node","navigateWithState","Typography_default","secondary","toLocaleString","thead","padding","spacing","unit","club","category","radius1000","radius3000","radius5000","radius10000","variant","Table_default","TableBody_default","TableRow_default","TableCell_default","align","toolbar","mixins","handleDrawerToggle","mapHandler","objectWithoutPropertiesLoose_default","mdUp","Clear_default","navigate","Reply_default","components_ValuesTable","drawer_MapHandler","Divider_default","drawer_SharesList","drawer_DrawerTable","display","flexDirection","alignItems","legends","justifyContent","legendItem","TableApp","anchorEl","menuOpen","filterRule","_handleSort","prevState","_handleFilterRule","str","indexOf","title","_this$state","Paper_default","Toolbar_default","flex","Tooltip_default","IconButton_default","aria-owns","aria-haspopup","buttonRef","FilterList_default","Popper_default","filterMenuWrapper","open","transition","disablePortal","placement","TransitionProps","Grow_default","transformOrigin","ClickAwayListener_default","onClickAway","event","contains","MenuList_default","MenuItem_default","CheckCircle_default","Remove_default","inset","tableWrapper","table","TableHead_default","indexCell","nameCell","TableSortLabel_default","active","direction","sortData","datum","scope","gatsby_browser_entry","to","marginTop","minWidth","overflowX","zIndex","isAsc","sortProperty","length","some","sort","b","themes","arc","dirs","items","arr","directions","angle","startAngle","endAngle","from","buffersToDirection","dir","item","i","d3arc","outerRadius","innerRadius","padAngle","calcDensity","query","site","siteMetadata","description","_3166699173","MapPage","location","drawerOpen","initialAppState","allVenuesJson","_data$venuesJson","venuesJson","topojson","topofeature","objects","others","drawer","components_DrawerInner","Helmet_default","content","createDescriptionString","property","AppBar_default","appBar","menuButton","Menu_default","apptitle","currentIndex","ArrowForward_default","SwipeableDrawer_default","onClose","onOpen","paper","drawerPaper","Drawer_default","autoSizerWrapper","es","MapApp","Fab_default","fabZoomIn","disabled","Add_default","fabZoomOut","components_MapLegends","descTitle","buffersWrapper","disableHeight","_ref2","BuffersArcs","components_Attribution","withRoot","_drawer","_appBar","_menuButton","_apptitle","breakpoints","up","flexShrink","marginLeft","marginRight","flexGrow","paddingTop","@media (min-width: 600px)","lineHeight","down","bottom","right","maxWidth","margin","descParagraph","paddingLeft","paddingRight","__webpack_require__","r","__webpack_exports__","graphql","StaticQueryContext","StaticQuery","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","prop_types__WEBPACK_IMPORTED_MODULE_1__","prop_types__WEBPACK_IMPORTED_MODULE_1___default","gatsby_link__WEBPACK_IMPORTED_MODULE_2__","gatsby_link__WEBPACK_IMPORTED_MODULE_2___default","_public_page_renderer__WEBPACK_IMPORTED_MODULE_3__","_public_page_renderer__WEBPACK_IMPORTED_MODULE_3___default","_parse_path__WEBPACK_IMPORTED_MODULE_4__","createContext","createElement","Consumer","staticQueryData","children","propTypes","PropTypes","object","string","isRequired","func","m","module","exports","default","Radiuses","gatsby__WEBPACK_IMPORTED_MODULE_0__","ProdPageRenderer","pageResources","loader","getResourcesForPathnameSync","pathname","InternalPageRenderer","json","shape","Component","_React$PureComponent","WithRoot","_len","arguments","args","Array","_key","call","apply","muiPageContext","getPageContext","_babel_runtime_helpers_inheritsLoose__WEBPACK_IMPORTED_MODULE_0___default","_proto","prototype","jssStyles","document","querySelector","parentNode","removeChild","react__WEBPACK_IMPORTED_MODULE_1__","react_jss_lib_JssProvider__WEBPACK_IMPORTED_MODULE_4___default","generateClassName","_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_2__","sheetsManager","_material_ui_core_CssBaseline__WEBPACK_IMPORTED_MODULE_3___default","createMuiTheme","palette","blue","typography","useNextVariants","createPageContext","sheetsRegistry","SheetsRegistry","createGenerateClassName","process","browser","global","__INIT_MATERIAL_UI__"],"mappings":"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","file":"component---src-templates-maps-tsx-36abf04dff4805243681.js","sourcesContent":["import fetch from 'isomorphic-fetch';\n\nexport interface Tile {\n  id: string;\n  x: number;\n  y: number;\n  z: number;\n  tx: number;\n  ty: number;\n  scale: number;\n  translate: [number, number];\n  mag: number;\n}\n\ntype TileUrl = string | undefined;\n\nexport interface TileWithURL extends Tile {\n  url: TileUrl;\n}\n\nexport interface TileTree {\n  [key: string]: {\n    [key: string]: {\n      [key: string]: TileUrl;\n    };\n  };\n}\n\ninterface TileSetOptions {\n  url?: string;\n  maxZoom?: number;\n  minZoom?: number;\n}\n\nclass TileSet {\n  readonly tileTree: TileTree;\n  readonly maxZoom: number;\n  readonly minZoom: number;\n  readonly tileUrl: string;\n  constructor(options: TileSetOptions = {}) {\n    this.tileUrl = options.url || '//cyberjapandata.gsi.go.jp/xyz/std/{z}/{x}/{y}.png';\n    this.maxZoom = options.maxZoom || 20;\n    this.minZoom = options.maxZoom || 2;\n    this.tileTree = {};\n  }\n\n  private treeIncludesTile(tile: Tile): boolean {\n    const { x, y, z } = tile;\n    return (\n      this.tileTree.hasOwnProperty(z.toString()) &&\n      this.tileTree[z.toString()].hasOwnProperty(x.toString()) &&\n      this.tileTree[z.toString()][x.toString()].hasOwnProperty(y.toString())\n    );\n  }\n\n  private tile2tree(tile: TileWithURL) {\n    const { x, y, z, url } = tile;\n    if (!this.tileTree.hasOwnProperty(z.toString())) {\n      this.tileTree[z.toString()] = {\n        [x.toString()]: {\n          [y.toString()]: url\n        }\n      };\n    } else if (!this.tileTree[z.toString()].hasOwnProperty(x.toString())) {\n      this.tileTree[z.toString()][x.toString()] = {\n        [y.toString()]: url\n      };\n    } else {\n      this.tileTree[z.toString()][x.toString()][y.toString()] = url;\n    }\n  }\n  // fetch new tiles\n  private fetchTiles(tiles: Tile[]): Promise<TileWithURL[]> {\n    return new Promise(resolve => {\n      const tasks = tiles.map(tile => this.fetchTile(tile, this.tileUrl));\n      Promise.all(tasks).then((data: TileWithURL[]) => {\n        resolve(data);\n      });\n    });\n  }\n  private fetchTile(tile: Tile, url: string): Promise<TileWithURL> {\n    const { x, y, z } = tile;\n    const fetchUrl = url.replace('{z}/{x}/{y}', `${z}/${x}/${y}`);\n\n    return fetch(fetchUrl)\n      .then(res => {\n        if (!res.ok) throw new Error();\n        return res.blob();\n      })\n      .then(blob => {\n        const tileWithURL: TileWithURL = {\n          ...tile,\n          url: URL.createObjectURL(blob)\n        };\n        this.tile2tree(tileWithURL);\n        return tileWithURL;\n      })\n      .catch(() => {\n        const tileWithURL: TileWithURL = {\n          ...tile,\n          url: undefined\n        };\n        this.tile2tree(tileWithURL);\n        return tileWithURL;\n      });\n  }\n\n  // helpers\n\n  public isRequireFetch(tiles: Tile[]): boolean {\n    return !tiles.every(tile => this.treeIncludesTile(tile));\n  }\n\n  public setTileUrlFromTree(tiles: Tile[]): TileWithURL[] {\n    return tiles\n      .filter(tile => this.treeIncludesTile(tile))\n      .map(tile => ({\n        ...tile,\n        url: this.tileTree[tile.z][tile.x][tile.y]\n      }));\n  }\n\n  public async updateTiles(newTiles: Tile[]) {\n    const tilesInTree = this.setTileUrlFromTree(newTiles.filter(tile => this.treeIncludesTile(tile)));\n\n    const tilesShouldFetch = newTiles.filter(tile => !this.treeIncludesTile(tile));\n\n    const fetchedTiles: TileWithURL[] = await this.fetchTiles(tilesShouldFetch);\n\n    return [...tilesInTree, ...fetchedTiles];\n  }\n}\n\nexport default TileSet;\n","import * as React from 'react';\nimport { scaleLinear, scalePow, scaleSequential } from 'd3-scale';\nimport { interpolateSpectral } from 'd3-scale-chromatic';\nimport { Feature, Point } from '@turf/helpers';\nimport { GeoProjection } from 'd3-geo';\n\nimport { MeshProperties } from '../utils/types';\n\ninterface Props {\n  feature: Feature<Point, MeshProperties>;\n  projection: GeoProjection;\n}\n\nexport const colorScale = scaleSequential(interpolateSpectral).domain([1250, 0]);\n\nexport const sizeScale = scalePow()\n  .domain([0, 1000])\n  .range([0, 8])\n  .exponent(0.5);\n\nconst MeshRect: React.FunctionComponent<Props> = (props: Props) => {\n  const { feature, projection } = props;\n  const { val } = feature.properties;\n  const center = projection(feature.geometry.coordinates);\n  const size = Math.abs(sizeScale(val) * Math.min(Math.max(1, projection.scale() / 125000), 2.5));\n\n  return (\n    <rect\n      fill={colorScale(val)}\n      fillOpacity={0.6}\n      x={center[0] - size / 2}\n      y={center[1] - size / 2}\n      width={size}\n      height={size}\n      style={{ mixBlendMode: 'multiply' }}\n    />\n  );\n};\n\nexport default MeshRect;\n","import * as React from 'react';\n/*\nconst filterMatrix = [\n  \"0.3333 0.3333 0.3333 0 0\",\n  \"0.3333 0.3333 0.3333 0 0\",\n  \"0.3333 0.3333 0.3333 0 0\",\n  \"0 0 0 1 0\"\n];\n*/\nconst filterMatrix = ['0.3333 0.3333 0.3333 0 0', '0.3333 0.3333 0.3333 0 0', '0.3333 0.3333 0.3333 0 0', '0 0 0 1 0'];\n\ninterface Props {\n  id: string;\n}\n\nconst GrayScaleFilter: React.FunctionComponent<Props> = (props: Props) => (\n  <filter id={props.id}>\n    <feColorMatrix type=\"matrix\" values={filterMatrix.join(' ')} />\n  </filter>\n);\n\nexport default GrayScaleFilter;\n","import * as React from 'react';\nimport { Theme } from '@material-ui/core/styles/createMuiTheme';\nimport withStyles, { WithStyles, StyleRules } from '@material-ui/core/styles/withStyles';\nimport createStyles from '@material-ui/core/styles/createStyles';\nconst d3tile = require('d3-tile').tile;\n\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport bbox from '@turf/bbox';\nimport { geoMercator, geoPath, GeoProjection, GeoPath } from 'd3-geo';\nimport TileSet, { Tile, TileWithURL } from '../utils/tileTree';\nimport MeshFeature from '../components/MeshFeature';\nimport GrayScaleFilter from '../components/GrayScaleFilter';\nimport { Feature, Point } from '@turf/helpers';\nimport { Buffer, MeshProperties, MapState } from '../utils/types';\n\nimport Place from '../image/place.svg';\n\nconst styles = (theme: Theme): StyleRules =>\n  createStyles({\n    root: {},\n    buffer: {\n      opacity: 0.2,\n      '&:hover': {\n        opacity: 1\n      }\n    },\n    bufferText: { fontSize: '80%', fontFamily: 'sans-serif', fontWeight: 'bold' },\n    progress: {\n      position: 'absolute',\n      width: '100%',\n      top: 0,\n      left: 0\n    },\n    points: {\n      mixBlendMode: 'multiply'\n    }\n  });\n\ninterface D3TileArray<T> extends Array<T> {\n  scale: number;\n  translate: [number, number];\n}\n\ninterface Props extends WithStyles<typeof styles> {\n  width: number;\n  height: number;\n  mapState: MapState;\n  geojson: {\n    type: 'FeatureCollection';\n    features: Feature<Point, MeshProperties>[];\n  };\n  buffers: Buffer[];\n}\n\ninterface State {\n  readonly fetchStatus?: 'yet' | 'fetching' | 'fetched';\n}\n\nclass Map extends React.Component<Props, State> {\n  readonly state: State = {\n    fetchStatus: 'yet'\n  };\n  private _tileSet = new TileSet();\n  private _terrain = new TileSet({\n    url: '//cyberjapandata.gsi.go.jp/xyz/slopemap/{z}/{x}/{y}.png'\n  });\n  // Tile Maps\n  // slope: //cyberjapandata.gsi.go.jp/xyz/slopemap/{z}/{x}/{y}.png\n\n  private _getTileCoordinates = (projection: GeoProjection, maxZoom: number = 20): Tile[] => {\n    const { width, height } = this.props;\n    let mag: number = 1.5;\n\n    const zoomer = Math.log2((projection.scale() * 2 * mag * Math.PI) / 256);\n    // required zoom level > maxZoom\n    if (zoomer >= maxZoom + 0.5) {\n      mag = Math.pow(2, maxZoom + 0.5 - zoomer);\n    }\n\n    const tiles: Tile[] = d3tile()\n      .size([width * mag, height * mag])\n      .scale(projection.scale() * 2 * Math.PI * mag)\n      .translate(projection([0, 0]).map(v => v * mag))()\n      .map((tile: { x: number; y: number; z: number }, index: number, array: D3TileArray<Tile>) => ({\n        ...tile,\n        mag,\n        id: `${tile.z}/${tile.x}/${tile.y}`,\n        scale: array.scale,\n        translate: array.translate\n      }));\n\n    return tiles;\n  };\n\n  private _fetchTiles = (tiles: Tile[], tileSet: TileSet) => {\n    return tileSet.updateTiles(tiles);\n  };\n\n  componentDidMount() {}\n\n  public render() {\n    const { classes, buffers, geojson, mapState } = this.props;\n    const { popVisibility, bufferVisibility, zoomLevel, terrain } = mapState;\n    const width = this.props.width || 400;\n    const height = this.props.height || 400;\n    const projection = buffers ? geoMercator().fitExtent([[10, 40], [width - 10, height - 40]], buffers[zoomLevel]) : geoMercator();\n\n    const path: GeoPath = geoPath(projection);\n    const tileSet = !terrain ? this._tileSet : this._terrain;\n    const tileCoords = !terrain ? this._getTileCoordinates(projection) : this._getTileCoordinates(projection, 15);\n\n    let renderTiles: TileWithURL[] = tileSet.setTileUrlFromTree(tileCoords);\n    let hoge = null;\n    if (tileSet.isRequireFetch(tileCoords)) {\n      hoge = <LinearProgress className={classes.progress} color=\"secondary\" />;\n      this._fetchTiles(tileCoords, tileSet).then(() => {\n        this.setState({ fetchStatus: 'fetched' });\n      });\n    }\n\n    return (\n      <div className={classes.root}>\n        <svg width={width} height={height}>\n          <g>\n            <GrayScaleFilter id=\"grayscale\" />\n            <g filter=\"url(#grayscale)\" className={classes.tiles} style={{ opacity: this.state.fetchStatus !== 'fetching' ? 1 : 0 }}>\n              {renderTiles.map((tile, index) => (\n                <image\n                  key={index}\n                  xlinkHref={tile.url}\n                  x={((tile.x + tile.translate[0]) * tile.scale) / tile.mag}\n                  y={((tile.y + tile.translate[1]) * tile.scale) / tile.mag}\n                  width={tile.scale / tile.mag}\n                  height={tile.scale / tile.mag}\n                  imageRendering=\"optimizeQuality\"\n                />\n              ))}\n            </g>\n          </g>\n          {popVisibility ? (\n            <g className={classes.points} style={{ opacity: this.state.fetchStatus !== 'yet' ? 1 : 0 }}>\n              {geojson\n                ? geojson.features.map((feature, index) =>\n                    feature.geometry.type === 'Point' ? <MeshFeature key={index} feature={feature} projection={projection} /> : null\n                  )\n                : null}\n            </g>\n          ) : null}\n          {bufferVisibility ? (\n            <g>\n              {buffers\n                ? buffers.map((feature, index) => {\n                    const bb = bbox(feature);\n                    const lb = projection([bb[2] + (bb[0] - bb[2]) / 2, bb[1]]);\n                    return (\n                      <g key={index} className={classes.buffer}>\n                        <path d={path(feature) || undefined} fill=\"none\" stroke=\"rgba(255, 255, 255, 0.2)\" strokeWidth={12} />\n                        <path d={path(feature) || undefined} fill=\"none\" stroke=\"rgb(200, 60, 80)\" strokeWidth={3} />\n                        <text className={classes.bufferText} x={lb[0]} y={lb[1]} dy=\"1em\" textAnchor=\"middle\" fill=\"rgb(200, 60, 80)\">\n                          {feature.properties.radius}\n                        </text>\n                      </g>\n                    );\n                  })\n                : null}\n            </g>\n          ) : null}\n          <g>\n            <image xlinkHref={Place} x={width / 2} y={height / 2} width={28} height={28} transform=\"translate(-14, -26)\" />\n          </g>\n        </svg>\n        {hoge || null}\n      </div>\n    );\n  }\n}\n\nexport default withStyles(styles)(Map);\n","import * as React from 'react';\nimport List from '@material-ui/core/List';\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport Hidden from '@material-ui/core/Hidden';\nimport Switch from '@material-ui/core/Switch';\nimport { MapState } from '../../utils/types';\n\n// Icons\nimport ZoomIn from '@material-ui/icons/ZoomIn';\nimport ZoomOut from '@material-ui/icons/ZoomOut';\nimport LandScape from '@material-ui/icons/LandScape';\nimport PeopleIcon from '@material-ui/icons/People';\nimport Adjust from '@material-ui/icons/Adjust';\n\ninterface Props {\n  mapState: MapState;\n  handleZoomIn: () => any;\n  handleZoomOut: () => any;\n  handleTerrain: () => any;\n  handlePopVisibility: () => any;\n  handleBufferVisibility: () => any;\n}\n\nconst MapHandler: React.FunctionComponent<Props> = ({\n  mapState,\n  handleZoomIn,\n  handleZoomOut,\n  handleTerrain,\n  handlePopVisibility,\n  handleBufferVisibility\n}: Props) => (\n  <List subheader={<ListSubheader>地図</ListSubheader>}>\n    <Hidden smDown implementation=\"css\">\n      <ListItem button selected={mapState.zoomLevel === 0} onClick={handleZoomIn}>\n        <ListItemIcon>\n          <ZoomIn />\n        </ListItemIcon>\n        <ListItemText>地図を拡大</ListItemText>\n      </ListItem>\n      <ListItem button selected={mapState.zoomLevel === 3} onClick={handleZoomOut}>\n        <ListItemIcon>\n          <ZoomOut />\n        </ListItemIcon>\n        <ListItemText primary=\"地図を縮小\" />\n      </ListItem>\n    </Hidden>\n    <ListItem button>\n      <ListItemIcon>\n        <LandScape />\n      </ListItemIcon>\n      <ListItemText primary=\"地形モード\" />\n      <ListItemSecondaryAction>\n        <Switch onChange={handleTerrain} checked={mapState.terrain} />\n      </ListItemSecondaryAction>\n    </ListItem>\n    <ListItem>\n      <ListItemIcon>\n        <PeopleIcon />\n      </ListItemIcon>\n      <ListItemText primary=\"人口\" />\n      <ListItemSecondaryAction>\n        <Switch onChange={handlePopVisibility} checked={mapState.popVisibility} />\n      </ListItemSecondaryAction>\n    </ListItem>\n    <ListItem>\n      <ListItemIcon>\n        <Adjust />\n      </ListItemIcon>\n      <ListItemText primary=\"距離円\" />\n      <ListItemSecondaryAction>\n        <Switch onChange={handleBufferVisibility} checked={mapState.bufferVisibility} />\n      </ListItemSecondaryAction>\n    </ListItem>\n  </List>\n);\n\nexport default MapHandler;\n","import * as React from 'react';\nimport Icon from '@material-ui/core/Icon';\nimport { library } from '@fortawesome/fontawesome-svg-core';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faTwitter } from '@fortawesome/free-brands-svg-icons/faTwitter';\n\ninterface Props {\n  color?: 'primary' | 'secondary' | 'action' | 'error' | 'disabled';\n}\n\nclass TwitterIcon extends React.PureComponent<Props> {\n  componentWillMount() {\n    library.add(faTwitter);\n  }\n  public render() {\n    const { color } = this.props;\n    return (\n      <Icon color={color}>\n        <FontAwesomeIcon icon={['fab', 'twitter']} />\n      </Icon>\n    );\n  }\n}\n\nexport default TwitterIcon;\n","import * as React from 'react';\nimport Icon from '@material-ui/core/Icon';\nimport { library } from '@fortawesome/fontawesome-svg-core';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faFacebook } from '@fortawesome/free-brands-svg-icons/faFacebook';\n\ninterface Props {\n  color?: 'primary' | 'secondary' | 'action' | 'error' | 'disabled';\n}\n\nclass FacebookIcon extends React.PureComponent<Props> {\n  componentWillMount() {\n    library.add(faFacebook);\n  }\n  public render() {\n    const { color } = this.props;\n    return (\n      <Icon color={color}>\n        <FontAwesomeIcon icon={['fab', 'facebook']} />\n      </Icon>\n    );\n  }\n}\n\nexport default FacebookIcon;\n","import * as React from 'react';\nimport List from '@material-ui/core/List';\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport TwitterIcon from '../fa-buttons/TwitterIcon';\nimport FacebookIcon from '../fa-buttons/FacebookIcon';\nimport { Summary } from '../../utils/types';\n\ninterface Props {\n  summary: Summary;\n}\n\nconst SharesList: React.FunctionComponent<Props> = ({ summary }: Props) => (\n  <List subheader={<ListSubheader>シェア</ListSubheader>}>\n    <ListItem button component=\"a\" href={createTwiterShareUrl(summary)} target=\"_blank\" rel=\"noopener noreferrer\">\n      <ListItemIcon>\n        <TwitterIcon />\n      </ListItemIcon>\n      <ListItemText primary=\"Twitterで共有\" />\n    </ListItem>\n    <ListItem button component=\"a\" href={createFbShareUrl(summary)} target=\"_blank\" rel=\"noopener noreferrer\">\n      <ListItemIcon>\n        <FacebookIcon />\n      </ListItemIcon>\n      <ListItemText primary=\"Facebookで共有\" />\n    </ListItem>\n  </List>\n);\n\nexport default SharesList;\n\n// helpers\nfunction createTwiterShareUrl(summary: Summary): string {\n  return (\n    `https://twitter.com/intent/tweet?text=` +\n    encodeURI(`${summary.name}周辺の人口`) +\n    `&url=` +\n    encodeURIComponent(`https://cieloazul310.github.io/gatsby-stadiums-population/${summary.slug}/`)\n  );\n}\n\nfunction createFbShareUrl(summary: Summary): string {\n  return (\n    `https://www.facebook.com/sharer/sharer.php?u=` +\n    encodeURIComponent(`https://cieloazul310.github.io/gatsby-stadiums-population/${summary.slug}/`)\n  );\n}\n","import * as React from 'react';\nimport createStyles from '@material-ui/core/styles/createStyles';\nimport withStyles, { WithStyles, StyleRules } from '@material-ui/core/styles/withStyles';\nimport List from '@material-ui/core/List';\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Typography from '@material-ui/core/Typography';\n\nimport { navigateWithState, VenueEdge, AppState, TableState } from '../../utils/types';\n\nconst styles: StyleRules = createStyles({\n  root: {},\n  itemTitle: {\n    fontSize: '80%',\n    fontWeight: 'bold'\n  },\n  itemNumber: {\n    textAlign: 'right'\n  }\n});\n\ninterface Props extends WithStyles<typeof styles> {\n  slug: string;\n  edges: VenueEdge[];\n  appState: AppState;\n}\n\nconst DrawerTable: React.FC<Props> = ({ classes, slug, edges, appState }: Props) => (\n  <List className={classes.root} subheader={<ListSubheader>{`一覧 ${createSortString(appState.tableState)}`}</ListSubheader>}>\n    {edges.map(edge => (\n      <ListItem\n        key={edge.node.summary.slug}\n        button\n        selected={edge.node.summary.slug === slug}\n        onClick={() => {\n          navigateWithState(`/${edge.node.summary.slug}/`, appState);\n        }}\n      >\n        <ListItemText\n          primary={<Typography className={classes.itemTitle}>{edge.node.summary.name}</Typography>}\n          secondary={\n            <Typography component=\"span\" className={classes.itemNumber}>\n              {edge.node.summary[sortKeyToProps(appState.tableState)].toLocaleString()}\n            </Typography>\n          }\n        />\n      </ListItem>\n    ))}\n  </List>\n);\n\nexport default withStyles(styles)(DrawerTable);\n\n// helpers\nfunction sortKeyToProps(tableState: TableState) {\n  return tableState.sortKey === 0\n    ? 'radius1000'\n    : tableState.sortKey === 1\n    ? 'radius3000'\n    : tableState.sortKey === 2\n    ? 'radius5000'\n    : 'radius10000';\n}\n\nfunction createSortString(tableState: TableState): string {\n  const { ascSort, sortKey } = tableState;\n  const sortRule = ascSort ? '昇順' : '降順';\n  const sortLabel = ['1km', '3km', '5km', '10km'][sortKey];\n\n  return `${sortLabel}圏人口 ${sortRule}`;\n}\n","import * as React from 'react';\nimport { Theme } from '@material-ui/core/styles/createMuiTheme';\nimport withStyles, { WithStyles, StyleRules } from '@material-ui/core/styles/withStyles';\nimport createStyles from '@material-ui/core/styles/createStyles';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport Typography from '@material-ui/core/Typography';\nimport { Summary } from '../utils/types';\n\nconst styles = (theme: Theme): StyleRules =>\n  createStyles({\n    root: {},\n    thead: {\n      padding: theme.spacing.unit * 2\n    }\n  });\n\ninterface Props extends WithStyles<typeof styles> {\n  summary: Summary;\n}\n\nconst ValuesTable: React.FunctionComponent<Props> = (props: Props) => {\n  const { classes, summary } = props;\n  const { club, category, radius1000, radius3000, radius5000, radius10000 } = summary;\n\n  return (\n    <div className={classes.root}>\n      <div className={classes.thead}>\n        <Typography variant=\"caption\">クラブ: {club.join(', ')}</Typography>\n        <Typography variant=\"caption\">カテゴリー: {category.join(', ')}</Typography>\n      </div>\n      <Table>\n        <TableBody>\n          <TableRow>\n            <TableCell align=\"right\">1km圏</TableCell>\n            <TableCell align=\"right\">{radius1000.toLocaleString()}</TableCell>\n          </TableRow>\n          <TableRow>\n            <TableCell align=\"right\">3km圏</TableCell>\n            <TableCell align=\"right\">{radius3000.toLocaleString()}</TableCell>\n          </TableRow>\n          <TableRow>\n            <TableCell align=\"right\">5km圏</TableCell>\n            <TableCell align=\"right\">{radius5000.toLocaleString()}</TableCell>\n          </TableRow>\n          <TableRow>\n            <TableCell align=\"right\">10km圏</TableCell>\n            <TableCell align=\"right\">{radius10000.toLocaleString()}</TableCell>\n          </TableRow>\n        </TableBody>\n      </Table>\n    </div>\n  );\n};\n\nexport default withStyles(styles)(ValuesTable);\n","import * as React from 'react';\nimport { navigate } from 'gatsby';\nimport { Theme } from '@material-ui/core/styles/createMuiTheme';\nimport createStyles from '@material-ui/core/styles/createStyles';\nimport withStyles, { WithStyles, StyleRules } from '@material-ui/core/styles/withStyles';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Divider from '@material-ui/core/Divider';\nimport Hidden from '@material-ui/core/Hidden';\n\n// Drawer Components\nimport MapHandler from './drawer/MapHandler';\nimport SharesList from './drawer/SharesList';\nimport DrawerTable from './drawer/DrawerTable';\n\n// Icons\nimport Clear from '@material-ui/icons/Clear';\nimport Reply from '@material-ui/icons/Reply';\n\nimport ValuesTable from '../components/ValuesTable';\nimport { Summary, AppState, VenueEdge } from '../utils/types';\n\nconst styles = (theme: Theme): StyleRules =>\n  createStyles({\n    root: {},\n    toolbar: theme.mixins.toolbar\n  });\n\ninterface Props extends WithStyles<typeof styles> {\n  summary: Summary;\n  appState: AppState;\n  edges: VenueEdge[];\n  handleDrawerToggle: () => any;\n  handleZoomIn: () => any;\n  handleZoomOut: () => any;\n  handleTerrain: () => any;\n  handlePopVisibility: () => any;\n  handleBufferVisibility: () => any;\n}\n\nconst DrawerInner: React.FunctionComponent<Props> = ({ classes, summary, appState, edges, handleDrawerToggle, ...mapHandler }: Props) => {\n  const { mapState } = appState;\n\n  const DrawerToolBar = () => (\n    <div className={classes.toolbar}>\n      <List>\n        <Hidden mdUp implementation=\"css\">\n          <ListItem button onClick={handleDrawerToggle}>\n            <ListItemIcon>\n              <Clear />\n            </ListItemIcon>\n            <ListItemText primary=\"閉じる\" />\n          </ListItem>\n        </Hidden>\n        <ListItem\n          button\n          onClick={() => {\n            navigate('/', { state: appState });\n          }}\n        >\n          <ListItemIcon>\n            <Reply />\n          </ListItemIcon>\n          <ListItemText>表に戻る</ListItemText>\n        </ListItem>\n      </List>\n    </div>\n  );\n\n  return (\n    <div className={classes.root}>\n      <DrawerToolBar />\n      <ValuesTable summary={summary} />\n      <MapHandler mapState={mapState} {...mapHandler} />\n      <Divider />\n      <SharesList summary={summary} />\n      <Divider />\n      <DrawerTable slug={summary.slug} edges={edges} appState={appState} />\n    </div>\n  );\n};\n\nexport default withStyles(styles)(DrawerInner);\n","import * as React from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport { Theme } from '@material-ui/core/styles/createMuiTheme';\nimport withStyles, { WithStyles, StyleRules } from '@material-ui/core/styles/withStyles';\nimport createStyles from '@material-ui/core/styles/createStyles';\nimport { sizeScale, colorScale } from './MeshFeature';\n\nconst styles = (theme: Theme): StyleRules =>\n  createStyles({\n    root: {\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center'\n    },\n    legends: {\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'flex-end'\n    },\n    legendItem: {\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center',\n      fontSize: '80%',\n      padding: theme.spacing.unit\n    }\n  });\n\ntype Props = WithStyles<typeof styles>;\n\nconst MapLegends: React.FunctionComponent<Props> = (props: Props) => (\n  <div className={props.classes.root}>\n    <div className={props.classes.legends}>\n      {[100, 250, 500, 750, 1000, 1500, 2000].map(val => {\n        const size = sizeScale(val) * 2;\n        const color = colorScale(val);\n        return (\n          <div className={props.classes.legendItem} key={val}>\n            <svg width={30} height={30}>\n              <rect x={15 - size / 2} y={15 - size / 2} width={size} height={size} fill={color} fillOpacity={1} />\n            </svg>\n            <Typography variant=\"caption\">{val}</Typography>\n          </div>\n        );\n      })}\n    </div>\n    <Typography variant=\"caption\">1メッシュ(約250m四方)に含まれる人口</Typography>\n  </div>\n);\n\nexport default withStyles(styles)(MapLegends);\n","import * as React from 'react';\nimport { Link } from 'gatsby';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport TableSortLabel from '@material-ui/core/TableSortLabel';\nimport Paper from '@material-ui/core/Paper';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport IconButton from '@material-ui/core/IconButton';\nimport FilterListIcon from '@material-ui/icons/FilterList';\nimport Popper from '@material-ui/core/Popper';\nimport Grow from '@material-ui/core/Grow';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport MenuList from '@material-ui/core/MenuList';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\nimport RemoveIcon from '@material-ui/icons/Remove';\nimport { Theme } from '@material-ui/core/styles/createMuiTheme';\nimport Typography from '@material-ui/core/Typography';\nimport withStyles, { WithStyles, StyleRules } from '@material-ui/core/styles/withStyles';\nimport createStyles from '@material-ui/core/styles/createStyles';\nimport { Summary, VenueEdge, AppState, TableState } from '../utils/types';\n\nconst tableStyles = (theme: Theme): StyleRules =>\n  createStyles({\n    root: {\n      width: '100%',\n      marginTop: theme.spacing.unit * 3\n    },\n    table: {\n      minWidth: 760\n    },\n    tableWrapper: {\n      overflowX: 'auto'\n    },\n    indexCell: {\n      width: '2em',\n      padding: '4px 8px 4px 8px'\n    },\n    nameCell: {\n      width: '16em',\n      padding: '4px 16px 4px 24px'\n    },\n    filterMenuWrapper: {\n      zIndex: 1\n    }\n  });\n\ninterface Props extends WithStyles<typeof tableStyles> {\n  title: string;\n  data: Array<VenueEdge>;\n  appState: AppState | null;\n}\n\ninterface State extends TableState {\n  readonly menuOpen: boolean;\n}\n\nclass TableApp extends React.Component<Props, State> {\n  private anchorEl: HTMLElement = undefined;\n  readonly state: State = this.props.appState\n    ? {\n        ...this.props.appState.tableState,\n        menuOpen: false\n      }\n    : {\n        ascSort: false,\n        sortKey: 3,\n        filterRule: [],\n        menuOpen: false\n      };\n\n  private _handleSort = (index: number) => {\n    this.setState(prevState => ({\n      ascSort: prevState.sortKey === index ? !prevState.ascSort : false,\n      sortKey: index\n    }));\n  };\n\n  private _handleFilterRule = (str: string) => {\n    this.setState(prevState => ({\n      filterRule:\n        prevState.filterRule.indexOf(str) >= 0 ? prevState.filterRule.filter(filter => filter !== str) : [...prevState.filterRule, str]\n    }));\n  };\n\n  public render() {\n    const { classes, title, data, appState } = this.props;\n    const { ascSort, sortKey, filterRule, menuOpen } = this.state;\n    return (\n      <Paper className={classes.root}>\n        <Toolbar>\n          <div style={{ flex: '0 0 auto' }}>\n            <Typography variant=\"h6\">{title}</Typography>\n          </div>\n          <div style={{ flex: '1 1 100%' }} />\n          <div>\n            <div>\n              <Tooltip title=\"Filter\">\n                <IconButton\n                  aria-owns={menuOpen ? 'menu-list' : undefined}\n                  aria-haspopup=\"true\"\n                  buttonRef={node => {\n                    this.anchorEl = node;\n                  }}\n                  onClick={() => {\n                    this.setState(prev => ({ menuOpen: !prev.menuOpen }));\n                  }}\n                >\n                  <FilterListIcon />\n                </IconButton>\n              </Tooltip>\n              <Popper\n                className={classes.filterMenuWrapper}\n                anchorEl={this.anchorEl}\n                open={menuOpen}\n                transition\n                disablePortal\n                placement=\"bottom-end\"\n              >\n                {({ TransitionProps }) => (\n                  <Grow id=\"menu-list\" {...TransitionProps} style={{ transformOrigin: 'right top' }}>\n                    <Paper>\n                      <ClickAwayListener\n                        onClickAway={event => {\n                          if (this.anchorEl.contains(event.target)) {\n                            return;\n                          }\n                          this.setState({ menuOpen: false });\n                        }}\n                      >\n                        <MenuList>\n                          {['J1', 'J2', 'J3', 'JFL', '地域', 'その他'].map((str, index) => (\n                            <MenuItem\n                              key={index}\n                              onClick={() => {\n                                this._handleFilterRule(str);\n                              }}\n                            >\n                              <ListItemIcon>{filterRule.indexOf(str) < 0 ? <CheckCircleIcon /> : <RemoveIcon />}</ListItemIcon>\n                              <ListItemText inset primary={str} />\n                            </MenuItem>\n                          ))}\n                        </MenuList>\n                      </ClickAwayListener>\n                    </Paper>\n                  </Grow>\n                )}\n              </Popper>\n            </div>\n          </div>\n        </Toolbar>\n        <div className={classes.tableWrapper}>\n          <Table className={classes.table}>\n            <TableHead>\n              <TableRow>\n                <TableCell className={classes.indexCell} align=\"right\">\n                  i\n                </TableCell>\n                <TableCell className={classes.nameCell}>name</TableCell>\n                {['1km', '3km', '5km', '10km'].map((str, index) => (\n                  <TableCell key={index} align=\"right\">\n                    <TableSortLabel active={index === sortKey} direction={ascSort ? 'asc' : 'desc'} onClick={() => this._handleSort(index)}>\n                      {str}\n                    </TableSortLabel>\n                  </TableCell>\n                ))}\n              </TableRow>\n            </TableHead>\n            <TableBody>\n              {sortData(data, ascSort, sortKey, filterRule).map((datum, index) => (\n                <TableRow key={index}>\n                  <TableCell className={classes.indexCell} component=\"th\" scope=\"row\" align=\"right\">\n                    {index + 1}\n                  </TableCell>\n                  <TableCell className={classes.nameCell} component=\"th\" scope=\"row\">\n                    <Link\n                      to={`/${datum.node.summary.slug}/`}\n                      state={{\n                        mapState: appState.mapState || null,\n                        tableState: {\n                          ascSort,\n                          sortKey,\n                          filterRule\n                        }\n                      }}\n                    >\n                      {datum.node.summary.name}\n                    </Link>\n                  </TableCell>\n                  <TableCell align=\"right\">{datum.node.summary.radius1000.toLocaleString()}</TableCell>\n                  <TableCell align=\"right\">{datum.node.summary.radius3000.toLocaleString()}</TableCell>\n                  <TableCell align=\"right\">{datum.node.summary.radius5000.toLocaleString()}</TableCell>\n                  <TableCell align=\"right\">{datum.node.summary.radius10000.toLocaleString()}</TableCell>\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n        </div>\n      </Paper>\n    );\n  }\n}\n\nexport default withStyles(tableStyles)(TableApp);\n\n// utils\n\nexport function sortData(data: VenueEdge[], ascSort: boolean, sortKey: number, filterRule: string[] = []): VenueEdge[] {\n  const isAsc = ascSort ? 1 : -1;\n  const sortProperty = sortKey === 0 ? 'radius1000' : sortKey === 1 ? 'radius3000' : sortKey === 2 ? 'radius5000' : 'radius10000';\n\n  return filterRule.length\n    ? data\n        .filter(datum => datum.node.summary.category.some(category => filterRule.indexOf(category) < 0))\n        .sort((a, b) => isAsc * (a.node.summary[sortProperty] - b.node.summary[sortProperty]))\n    : data.sort((a, b) => isAsc * (a.node.summary[sortProperty] - b.node.summary[sortProperty]));\n}\n\nfunction filterIncludesEdge(filterRule: string[], edge: VenueEdge): boolean {\n  const categories = edge.node.summary.category;\n\n  return categories.some(category => filterRule.indexOf(category) < 0);\n}\n","import * as React from 'react';\nimport { Theme } from '@material-ui/core/styles/createMuiTheme';\nimport withStyles, { WithStyles, StyleRules } from '@material-ui/core/styles/withStyles';\nimport createStyles from '@material-ui/core/styles/createStyles';\nimport { arc as d3arc } from 'd3-shape';\nimport { scaleSequential } from 'd3-scale';\nimport { interpolateSpectral } from 'd3-scale-chromatic';\n\nimport { Buffer } from '../utils/types';\n\nconst styles = (themes: Theme): StyleRules =>\n  createStyles({\n    root: {},\n    arc: {\n      strokeWidth: 0,\n      '&:hover': {\n        strokeWidth: 3\n      }\n    }\n  });\n\ninterface Props extends WithStyles<typeof styles> {\n  width: number;\n  buffers: Buffer[];\n}\n\nconst color = scaleSequential(interpolateSpectral).domain([10000, 0]);\n\nconst BufferArcs: React.FunctionComponent<Props> = (props: Props) => {\n  const { classes, buffers, width } = props;\n  const size = Math.min(width, 600);\n  const dirs = buffersToDirection(buffers);\n\n  return (\n    <svg className={classes.root} width={size} height={size}>\n      <g transform={`translate(${size / 2}, ${size / 2})`}>\n        {dirs.map((dir, index) => (\n          <g key={index}>\n            {dir.items.map((item, i) => {\n              const arc = d3arc()\n                .outerRadius(((size - 48) * (i + 2)) / 10)\n                .innerRadius(((size - 48) * (i + 1)) / 10 + 4)\n                .padAngle(0.02);\n              return (\n                <g key={i}>\n                  <path\n                    className={classes.arc}\n                    d={arc(item)}\n                    fill={color(calcDensity(item.val, item.from, item.to))}\n                    fillOpacity={item.val ? 0.8 : 0.1}\n                    stroke={color(calcDensity(item.val, item.from, item.to))}\n                  />\n                </g>\n              );\n            })}\n          </g>\n        ))}\n      </g>\n      <g>\n        <text x={size / 2} dy=\"1em\" textAnchor=\"middle\">\n          北\n        </text>\n        <text x={size / 2} y={size} textAnchor=\"middle\">\n          南\n        </text>\n        <text y={size / 2} dy=\".5em\" textAnchor=\"start\">\n          西\n        </text>\n        <text x={size} y={size / 2} dy=\".5em\" textAnchor=\"end\">\n          東\n        </text>\n      </g>\n    </svg>\n  );\n};\n\nexport default withStyles(styles)(BufferArcs);\n\n// utils\n\nfunction buffersToDirection(buffers: Buffer[]) {\n  const directions = ['north', 'northeast', 'east', 'southeast', 'south', 'southwest', 'west', 'northwest'];\n  const dirObjs = directions.map(str => ({\n    direction: str,\n    items: buffers.map((feature, index, arr) => ({\n      ...directionToAngle(str),\n      from: index > 0 ? arr[index - 1].properties.radius : 0,\n      to: feature.properties.radius,\n      val: index > 0 ? feature.properties[str] - arr[index - 1].properties[str] : feature.properties[str]\n    }))\n  }));\n  return dirObjs;\n}\n\nfunction directionToAngle(key: string) {\n  const directions = ['north', 'northeast', 'east', 'southeast', 'south', 'southwest', 'west', 'northwest'];\n  const angle = (Math.PI * 2) / directions.length;\n  return {\n    startAngle: directions.indexOf(key) * angle - angle / 2,\n    endAngle: directions.indexOf(key) * angle + angle / 2\n  };\n}\n\nfunction calcDensity(val: number, from: number, to: number) {\n  return from === 0\n    ? (val * 8) / (Math.pow(to / 1000, 2) * Math.PI)\n    : (val * 8) / (Math.pow(to / 1000, 2) * Math.PI - Math.pow(from / 1000, 2) * Math.PI);\n}\n","import * as React from 'react';\nimport { StaticQuery, graphql } from 'gatsby';\nimport { Theme } from '@material-ui/core/styles/createMuiTheme';\nimport createStyles from '@material-ui/core/styles/createStyles';\nimport withStyles, { WithStyles, StyleRules } from '@material-ui/core/styles/withStyles';\nimport Typography from '@material-ui/core/Typography';\n\nconst styles = (theme: Theme): StyleRules =>\n  createStyles({\n    root: {}\n  });\n\ninterface Query {\n  site: {\n    siteMetadata: {\n      title: string;\n      siteUrl: string;\n      description: string;\n      author: {\n        name: string;\n        url: string;\n      };\n    };\n  };\n}\n\ntype Props = WithStyles<typeof styles>;\n\nconst Attribution: React.FunctionComponent<Props> = ({ classes }: Props) => (\n  <StaticQuery\n    query={graphql`\n      query {\n        site {\n          siteMetadata {\n            title\n            siteUrl\n            description\n            author {\n              name\n              url\n            }\n          }\n        }\n      }\n    `}\n    render={(data: Query) => (\n      <div className={classes.root}>\n        <aside>\n          <Typography variant=\"h6\">{data.site.siteMetadata.title}</Typography>\n          <Typography variant=\"body1\">{data.site.siteMetadata.description}</Typography>\n        </aside>\n      </div>\n    )}\n  />\n);\n\nexport default withStyles(styles)(Attribution);\n","import * as React from 'react';\nimport { graphql, Link } from 'gatsby';\nimport Helmet from 'react-helmet';\nimport AppBar from '@material-ui/core/AppBar';\nimport ToolBar from '@material-ui/core/Toolbar';\nimport Drawer from '@material-ui/core/Drawer';\nimport SwipeableDrawer from '@material-ui/core/SwipeableDrawer';\nimport Hidden from '@material-ui/core/Hidden';\nimport IconButton from '@material-ui/core/IconButton';\nimport Menu from '@material-ui/icons/Menu';\nimport Fab from '@material-ui/core/Fab';\nimport ArrowForward from '@material-ui/icons/ArrowForward';\nimport Typography from '@material-ui/core/Typography';\n// styles\nimport { Theme } from '@material-ui/core/styles/createMuiTheme';\nimport withStyles, { WithStyles, StyleRules } from '@material-ui/core/styles/withStyles';\nimport createStyles from '@material-ui/core/styles/createStyles';\n// icons\nimport AddIcon from '@material-ui/icons/Add';\nimport RemoveIcon from '@material-ui/icons/Remove';\n\nimport { AutoSizer } from 'react-virtualized';\nimport { feature as topofeature } from 'topojson-client';\nimport { Topology } from 'topojson-specification';\n\nimport MapApp from '../components/MapApp';\nimport DrawerInner from '../components/DrawerInner';\nimport MapLegends from '../components/MapLegends';\nimport { sortData } from '../components/TableApp';\nimport BufferArcs from '../components/BuffersArcs';\nimport ValuesTable from '../components/ValuesTable';\nimport Attribution from '../components/Attribution';\nimport { Summary, LocationWithState, VenueEdge, MapState, initialAppState, navigateWithState } from '../utils/types';\nimport withRoot from '../utils/withRoot';\n\nconst drawerWidth = 280;\n\nconst styles = (theme: Theme): StyleRules =>\n  createStyles({\n    root: {\n      display: 'flex'\n    },\n    drawer: {\n      [theme.breakpoints.up('md')]: {\n        width: drawerWidth,\n        flexShrink: 0\n      }\n    },\n    appBar: {\n      marginLeft: drawerWidth,\n      [theme.breakpoints.up('md')]: {\n        width: `calc(100% - ${drawerWidth}px)`\n      }\n    },\n    menuButton: {\n      marginRight: 10,\n      [theme.breakpoints.up('md')]: {\n        display: 'none'\n      }\n    },\n    drawerPaper: {\n      width: drawerWidth\n    },\n    content: {\n      flexGrow: 1,\n      paddingTop: 56,\n      '@media (min-width: 600px)': {\n        paddingTop: 64\n      }\n    },\n    apptitle: {\n      flexGrow: 1,\n      lineHeight: 1.2,\n      [theme.breakpoints.down('sm')]: {\n        fontSize: '90%'\n      }\n    },\n    autoSizerWrapper: {\n      height: 'calc(100vh - 56px)',\n      '@media (min-width: 600px)': {\n        height: 'calc(100vh - 64px)'\n      }\n    },\n    fabZoomIn: {\n      position: 'absolute',\n      bottom: theme.spacing.unit * 10,\n      right: theme.spacing.unit * 2\n    },\n    fabZoomOut: {\n      position: 'absolute',\n      bottom: theme.spacing.unit * 2,\n      right: theme.spacing.unit * 2\n    },\n    buffersWrapper: {\n      width: '100%',\n      maxWidth: 480,\n      margin: 'auto'\n    },\n    description: {\n      maxWidth: 800,\n      margin: 'auto'\n    },\n    descTitle: {\n      padding: theme.spacing.unit * 2\n    },\n    descParagraph: {\n      paddingLeft: theme.spacing.unit * 2,\n      paddingRight: theme.spacing.unit * 2\n    }\n  });\n\ninterface Props extends WithStyles<typeof styles> {\n  data: {\n    allVenuesJson: {\n      edges: Array<VenueEdge>;\n    };\n    venuesJson: {\n      fields: {\n        slug: string;\n      };\n      summary: Summary;\n      topojson: Topology;\n    };\n  };\n  location: LocationWithState;\n}\n\ninterface State extends MapState {\n  readonly drawerOpen: boolean;\n}\n\nclass MapPage extends React.Component<Props, State> {\n  readonly state = this.props.location.state\n    ? {\n        ...this.props.location.state.mapState,\n        drawerOpen: false\n      }\n    : {\n        ...initialAppState.mapState,\n        drawerOpen: false\n      };\n  private handleDrawerToggle = () => {\n    this.setState(prev => ({\n      drawerOpen: !prev.drawerOpen\n    }));\n  };\n  private handlePopVisibility = () => {\n    this.setState(prev => ({\n      popVisibility: !prev.popVisibility\n    }));\n  };\n  private handleBufferVisibility = () => {\n    this.setState(prev => ({\n      bufferVisibility: !prev.bufferVisibility\n    }));\n  };\n  private handleZoomIn = () => {\n    this.setState(prev => ({ zoomLevel: prev.zoomLevel !== 0 ? prev.zoomLevel - 1 : prev.zoomLevel }));\n  };\n  private handleZoomOut = () => {\n    this.setState(prev => ({ zoomLevel: prev.zoomLevel !== 3 ? prev.zoomLevel + 1 : prev.zoomLevel }));\n  };\n  private handleTerrain = () => {\n    this.setState(prev => ({\n      terrain: !prev.terrain\n    }));\n  };\n\n  public render() {\n    const { classes, data, location } = this.props;\n    const { popVisibility, bufferVisibility, zoomLevel, terrain } = this.state;\n    const tableState = location.state ? location.state.tableState : initialAppState.tableState;\n    const { edges } = data.allVenuesJson;\n    const { summary, topojson } = data.venuesJson;\n    const geojson = topofeature(topojson, topojson.objects.points);\n    const buffers = topofeature(topojson, topojson.objects.buffers).features;\n    const others = sortData(edges, tableState.ascSort, tableState.sortKey, tableState.filterRule);\n    const { name, club, slug } = summary;\n    const drawer = (\n      <DrawerInner\n        summary={summary}\n        edges={others}\n        appState={{ tableState, mapState: { popVisibility, bufferVisibility, zoomLevel, terrain } }}\n        handleDrawerToggle={this.handleDrawerToggle}\n        handleZoomIn={this.handleZoomIn}\n        handleZoomOut={this.handleZoomOut}\n        handleBufferVisibility={this.handleBufferVisibility}\n        handlePopVisibility={this.handlePopVisibility}\n        handleTerrain={this.handleTerrain}\n      />\n    );\n\n    return (\n      <div className={classes.root}>\n        <Helmet>\n          <title>{name}周辺の人口 | サッカースタジアムと人口</title>\n          <meta name=\"viewport\" content=\"width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no,minimal-ui\" />\n          <meta name=\"description\" content={createDescriptionString(name, club)} />\n          <meta property=\"og:type\" content=\"article\" />\n          <meta property=\"og:title\" content={`${name}周辺の人口`} />\n          <meta property=\"og:image\" content=\"https://cieloazul310.github.io/img/ogp2.png\" />\n          <meta property=\"og:url\" content={`https://cieloazul310.github.io/gatsby-stadiums-population/${slug}/`} />\n          <meta property=\"og:site_name\" content=\"水戸地図\" />\n          <meta name=\"twitter:card\" content=\"summary\" />\n          <meta name=\"twitter:description\" content={createDescriptionString(name, club)} />\n          <meta name=\"apple-mobile-web-app-capable\" content=\"yes\" />\n          <meta name=\"apple-mobile-web-app-status-bar-style\" content=\"black\" />\n        </Helmet>\n        <AppBar className={classes.appBar} position=\"fixed\">\n          <ToolBar>\n            <IconButton\n              className={classes.menuButton}\n              aria-owns=\"menu\"\n              aria-haspopup=\"true\"\n              onClick={this.handleDrawerToggle}\n              color=\"inherit\"\n            >\n              <Menu />\n            </IconButton>\n            <Typography color=\"inherit\" className={classes.apptitle} variant=\"h6\">\n              {name}\n            </Typography>\n            <IconButton\n              aria-owns=\"next\"\n              aria-haspopup=\"true\"\n              onClick={() => {\n                const currentIndex = others.map(edge => edge.node.summary.slug).indexOf(slug);\n                const next = currentIndex === others.length - 1 ? others[0] : others[currentIndex + 1];\n                navigateWithState(`/${next.node.summary.slug}/`, {\n                  tableState,\n                  mapState: { popVisibility, bufferVisibility, zoomLevel, terrain }\n                });\n              }}\n              color=\"inherit\"\n            >\n              <ArrowForward />\n            </IconButton>\n          </ToolBar>\n        </AppBar>\n        <nav className={classes.drawer}>\n          <Hidden mdUp implementation=\"css\">\n            <SwipeableDrawer\n              variant=\"temporary\"\n              open={this.state.drawerOpen}\n              onClose={this.handleDrawerToggle}\n              onOpen={this.handleDrawerToggle}\n              classes={{ paper: classes.drawerPaper }}\n            >\n              {drawer}\n            </SwipeableDrawer>\n          </Hidden>\n          <Hidden smDown implementation=\"css\">\n            <Drawer classes={{ paper: classes.drawerPaper }} variant=\"permanent\" open>\n              {drawer}\n            </Drawer>\n          </Hidden>\n        </nav>\n        <div className={classes.content}>\n          <div className={classes.autoSizerWrapper}>\n            <AutoSizer>\n              {({ width, height }) => (\n                <div>\n                  <MapApp\n                    width={width}\n                    height={height}\n                    geojson={geojson}\n                    buffers={buffers}\n                    mapState={{ popVisibility, bufferVisibility, zoomLevel, terrain }}\n                  />\n                  <Hidden implementation=\"css\" mdUp>\n                    <Fab className={classes.fabZoomIn} color=\"primary\" disabled={zoomLevel === 0} onClick={this.handleZoomIn}>\n                      <AddIcon />\n                    </Fab>\n                    <Fab className={classes.fabZoomOut} color=\"primary\" disabled={zoomLevel === 3} onClick={this.handleZoomOut}>\n                      <RemoveIcon />\n                    </Fab>\n                  </Hidden>\n                </div>\n              )}\n            </AutoSizer>\n          </div>\n          <MapLegends />\n          <div className={classes.description}>\n            <Typography className={classes.descTitle} variant=\"h6\">\n              {name}\n            </Typography>\n            <ValuesTable summary={summary} />\n            <div className={classes.buffersWrapper}>\n              <AutoSizer disableHeight>{({ width }) => <BufferArcs buffers={buffers} width={width} />}</AutoSizer>\n            </div>\n            <Attribution />\n            <Link to=\"/\" state={{ tableState, mapState: { popVisibility, bufferVisibility, zoomLevel } }}>\n              トップに戻る\n            </Link>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default withRoot(withStyles(styles)(MapPage));\n\n// helper\n\nfunction createDescriptionString(name: string, club: string[]): string {\n  const intro = club[0] !== 'その他' ? `${club.join(',')} のホームスタジアム・` : '';\n  return `${intro}${name}周辺の人口を総務省統計局の国勢調査に関する地域メッシュ統計(平成27年度)から算出し、地図に表示しました。`;\n}\n\nexport const query = graphql`\n  query($slug: String!) {\n    allVenuesJson {\n      edges {\n        node {\n          summary {\n            slug\n            name\n            club\n            shortname\n            category\n            radius1000\n            radius3000\n            radius5000\n            radius10000\n          }\n        }\n      }\n    }\n    venuesJson(fields: { slug: { eq: $slug } }) {\n      fields {\n        slug\n      }\n      summary {\n        name\n        club\n        shortname\n        category\n        radius1000\n        radius3000\n        radius5000\n        radius10000\n        slug\n      }\n      topojson {\n        type\n        transform {\n          scale\n          translate\n        }\n        objects {\n          points {\n            type\n            geometries {\n              type\n              coordinates\n              properties {\n                id\n                val\n              }\n            }\n          }\n          buffers {\n            type\n            geometries {\n              type\n              arcs\n              properties {\n                radius\n                population\n                north\n                northeast\n                east\n                southeast\n                south\n                southwest\n                west\n                northwest\n              }\n            }\n          }\n        }\n        arcs\n      }\n    }\n  }\n`;\n","import React from \"react\"\nimport PropTypes from \"prop-types\"\nimport Link, {\n  withPrefix,\n  navigate,\n  push,\n  replace,\n  navigateTo,\n} from \"gatsby-link\"\nimport PageRenderer from \"./public-page-renderer\"\nimport parsePath from \"./parse-path\"\n\nconst StaticQueryContext = React.createContext({})\n\nconst StaticQuery = props => (\n  <StaticQueryContext.Consumer>\n    {staticQueryData => {\n      if (\n        props.data ||\n        (staticQueryData[props.query] && staticQueryData[props.query].data)\n      ) {\n        return (props.render || props.children)(\n          props.data ? props.data.data : staticQueryData[props.query].data\n        )\n      } else {\n        return <div>Loading (StaticQuery)</div>\n      }\n    }}\n  </StaticQueryContext.Consumer>\n)\n\nStaticQuery.propTypes = {\n  data: PropTypes.object,\n  query: PropTypes.string.isRequired,\n  render: PropTypes.func,\n  children: PropTypes.func,\n}\n\nfunction graphql() {\n  throw new Error(\n    `It appears like Gatsby is misconfigured. Gatsby related \\`graphql\\` calls ` +\n      `are supposed to only be evaluated at compile time, and then compiled away,. ` +\n      `Unfortunately, something went wrong and the query was left in the compiled code.\\n\\n.` +\n      `Unless your site has a complex or custom babel/Gatsby configuration this is likely a bug in Gatsby.`\n  )\n}\n\nexport {\n  Link,\n  withPrefix,\n  graphql,\n  parsePath,\n  navigate,\n  push, // TODO replace for v3\n  replace, // TODO remove replace for v3\n  navigateTo, // TODO: remove navigateTo for v3\n  StaticQueryContext,\n  StaticQuery,\n  PageRenderer,\n}\n","const preferDefault = m => (m && m.default) || m\n\nif (process.env.BUILD_STAGE === `develop`) {\n  module.exports = preferDefault(require(`./public-page-renderer-dev`))\n} else if (process.env.BUILD_STAGE === `build-javascript`) {\n  module.exports = preferDefault(require(`./public-page-renderer-prod`))\n} else {\n  module.exports = () => null\n}\n","import { navigate } from 'gatsby';\nimport { Feature, Polygon } from '@turf/helpers';\nimport { LocationProps } from '@reach/router';\n\nexport const initialAppState: AppState = {\n  tableState: {\n    ascSort: false,\n    sortKey: 3,\n    filterRule: []\n  },\n  mapState: {\n    popVisibility: true,\n    bufferVisibility: true,\n    zoomLevel: 3,\n    terrain: false\n  }\n};\n\n// gatsby navigate with strict type checking\nexport const navigateWithState = (to: string, state: AppState) => {\n  navigate(to, { state });\n};\n\nexport enum Radiuses {\n  radius1000 = '1km',\n  radius3000 = '3km',\n  radius5000 = '5km',\n  radius10000 = '10km'\n}\n\nexport interface TableState {\n  readonly ascSort: boolean;\n  readonly sortKey: number;\n  readonly filterRule: string[];\n}\n\nexport interface MapState {\n  readonly popVisibility: boolean;\n  readonly bufferVisibility: boolean;\n  readonly zoomLevel: number;\n  readonly terrain?: boolean;\n}\n\nexport interface AppState {\n  tableState: TableState;\n  mapState: MapState;\n}\n\nexport interface LocationWithState extends LocationProps {\n  state: AppState | null;\n}\n\nexport interface Summary {\n  name: string;\n  club: string[];\n  category: string[];\n  shortname: string[];\n  slug: string;\n  radius1000: number;\n  radius3000: number;\n  radius5000: number;\n  radius10000: number;\n}\n\nexport interface VenueEdge {\n  node: {\n    summary: Summary;\n  };\n}\n\nexport interface BufferPropertis extends EighthDirections {\n  name: string;\n  radius: number;\n  population: number;\n}\n\nexport type Buffer = Feature<Polygon, BufferPropertis>;\n\nexport interface MeshProperties {\n  id: number;\n  val: number;\n}\n\nexport interface ForthDirections {\n  north: number;\n  east: number;\n  south: number;\n  west: number;\n}\n\nexport interface EighthDirections extends ForthDirections {\n  northeast: number;\n  southeast: number;\n  southwest: number;\n  northwest: number;\n}\n","import React from \"react\"\nimport PropTypes from \"prop-types\"\n\nimport InternalPageRenderer from \"./page-renderer\"\nimport loader from \"./loader\"\n\nconst ProdPageRenderer = ({ location }) => {\n  const pageResources = loader.getResourcesForPathnameSync(location.pathname)\n  return React.createElement(InternalPageRenderer, {\n    location,\n    pageResources,\n    ...pageResources.json,\n  })\n}\n\nProdPageRenderer.propTypes = {\n  location: PropTypes.shape({\n    pathname: PropTypes.string.isRequired,\n  }).isRequired,\n}\n\nexport default ProdPageRenderer\n","import * as React from 'react';\nimport { MuiThemeProvider } from '@material-ui/core/styles';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport JssProvider from 'react-jss/lib/JssProvider';\nimport getPageContext from './getPageContext';\n\nfunction withRoot<P>(Component: React.ComponentType<P>) {\n  class WithRoot extends React.PureComponent<P> {\n    private muiPageContext = getPageContext();\n\n    componentDidMount() {\n      const jssStyles = document.querySelector('#jss-server-side');\n      if (jssStyles && jssStyles.parentNode) {\n        jssStyles.parentNode.removeChild(jssStyles);\n      }\n    }\n\n    public render() {\n      return (\n        <JssProvider generateClassName={this.muiPageContext.generateClassName}>\n          <MuiThemeProvider theme={this.muiPageContext.theme} sheetsManager={this.muiPageContext.sheetsManager}>\n            <CssBaseline />\n            <Component {...this.props} />\n          </MuiThemeProvider>\n        </JssProvider>\n      );\n    }\n  }\n\n  return WithRoot;\n}\n\nexport default withRoot;\n","/* eslint-disable no-underscore-dangle */\n\nimport { SheetsRegistry } from 'jss';\nimport { createMuiTheme, createGenerateClassName } from '@material-ui/core/styles';\nimport blue from '@material-ui/core/colors/blue';\n\n// A theme with custom primary and secondary color.\n// It's optional.\nconst theme = createMuiTheme({\n  palette: {\n    primary: blue\n  },\n  typography: {\n    useNextVariants: true\n  }\n});\n\nfunction createPageContext() {\n  return {\n    theme,\n    // This is needed in order to deduplicate the injection of CSS in the page.\n    sheetsManager: new Map(),\n    // This is needed in order to inject the critical CSS.\n    sheetsRegistry: new SheetsRegistry(),\n    // The standard class name generator.\n    generateClassName: createGenerateClassName()\n  };\n}\n\nexport default function getPageContext() {\n  // Make sure to create a new context for every server-side request so that data\n  // isn't shared between connections (which would be bad).\n  if (!process.browser) {\n    return createPageContext();\n  }\n\n  // Reuse context on the client-side.\n  if (!global.__INIT_MATERIAL_UI__) {\n    global.__INIT_MATERIAL_UI__ = createPageContext();\n  }\n\n  return global.__INIT_MATERIAL_UI__;\n}\n","module.exports = \"data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxwYXRoIGQ9Ik0xMiAyQzguMTMgMiA1IDUuMTMgNSA5YzAgNS4yNSA3IDEzIDcgMTNzNy03Ljc1IDctMTNjMC0zLjg3LTMuMTMtNy03LTd6bTAiIGZpbGw9IiMwMDkxRUEiIHN0cm9rZT0id2hpdGUiIHN0cm9rZS13aWR0aD0iMSIvPgogICAgPHBhdGggZD0iTTEyIDExLjVjLTEuMzggMC0yLjUtMS4xMi0yLjUtMi41czEuMTItMi41IDIuNS0yLjUgMi41IDEuMTIgMi41IDIuNS0xLjEyIDIuNS0yLjUgMi41eiIgZmlsbD0id2hpdGUiLz4KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiLz4KPC9zdmc+Cg==\""],"sourceRoot":""}