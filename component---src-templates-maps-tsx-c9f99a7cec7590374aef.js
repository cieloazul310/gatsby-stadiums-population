(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{147:function(t,e,n){"use strict";n.r(e);n(255);var r=n(9),i=(n(0),n(165)),a=n(242),o=n.n(a),s=n(212),u=n.n(s),c=n(299),l=n.n(c),d=n(458),h=n.n(d),f=n(195),p=n.n(f),g=n(150),b=n.n(g),m=n(179),j=n.n(m),y=n(312),O=n(526),v=n(254),w=(n(55),n(525)),x=n(251),I=n(252),M=Object(x.b)(I.a).domain([1e4,0]),T=b()(function(t){return{root:{}}})(function(t){var e=t.classes,n=t.buffers,i=t.width,a=t.height,o=i&&a?Math.min(i,a):320,s=(n.map(function(t){return t.properties?{radius:t.properties.radius,population:t.properties.population,directions:S(t)}:{}}),function(t){return["north","northeast","east","southeast","south","southwest","west","northwest"].map(function(e){return{direction:e,items:t.map(function(t,n,r){return Object.assign({},k(e),{from:n>0?r[n-1].properties.radius:0,to:t.properties.radius,val:n>0?t.properties[e]-r[n-1].properties[e]:t.properties[e]})})}})}(n));Object(w.a)().outerRadius(o/2).innerRadius(o/3).padAngle(.01);return Object(r.d)("svg",{className:e.root,width:o,height:o},Object(r.d)("g",{transform:"translate("+o/2+", "+o/2+")"},s.map(function(t,e){return Object(r.d)("g",{key:e},t.items.map(function(t,e){var n,i,a,s=Object(w.a)().outerRadius((o/2-20)*t.to/1e4).innerRadius((o/2-20)*t.from/1e4+4).padAngle(.01);return Object(r.d)("g",{key:e},Object(r.d)("path",{d:s(t),fill:M((n=t.val,i=t.from,a=t.to,0===i?8*n/(Math.pow(a/1e3,2)*Math.PI):8*n/(Math.pow(a/1e3,2)*Math.PI-Math.pow(i/1e3,2)*Math.PI)))}))}))})),Object(r.d)("g",null,Object(r.d)("text",{x:o/2,dy:"1em",textAnchor:"middle"},"N"),Object(r.d)("text",{x:o/2,y:o,textAnchor:"middle"},"S"),Object(r.d)("text",{y:o/2,dy:".5em",textAnchor:"start"},"W"),Object(r.d)("text",{x:o,y:o/2,dy:".5em",textAnchor:"end"},"E")))});function S(t){if(!t.properties)return null;var e=t.properties,n={north:e.north,northeast:e.northeast,east:e.east,southeast:e.southeast,south:e.south,southwest:e.southwest,west:e.west,northwest:e.northwest};for(var r in n){var i=n[r];n[r]=Object.assign({},k(r),{val:i,dir:r})}return n}function k(t){var e=["north","northeast","east","southeast","south","southwest","west","northwest"],n=2*Math.PI/e.length;return{startAngle:e.indexOf(t)*n-n/2,endAngle:e.indexOf(t)*n+n/2}}var P=n(239);n.d(e,"query",function(){return N});e.default=Object(P.a)(b()(function(t){return j()({root:{},apptitle:{flexGrow:1},autoSizerWrapper:{height:"calc(100vh - 56px)"},description:{maxWidth:800,margin:"auto",padding:"1em"}})})(function(t){var e=t.classes,n=t.data,a=n.allVenuesJson.edges,s=n.venuesJson,c=s.summary,d=s.topojson,f=Object(O.a)(d,d.objects.points),g=Object(O.a)(d,d.objects.buffers).features,b=c.name,m=c.radius1000,j=c.radius3000,w=c.radius5000,x=c.radius10000;return Object(r.d)("div",{className:e.root},Object(r.d)(o.a,{position:"static"},Object(r.d)(u.a,null,Object(r.d)(p.a,{color:"inherit",className:e.apptitle,variant:"h6"},b),Object(r.d)(l.a,{"aria-owns":"next","aria-haspopup":"true",onClick:function(){var t=a.map(function(t){return t.node.summary.slug}),e=t[Math.round(Math.random()*t.length)];Object(i.navigate)("/"+e+"/")},color:"inherit"},Object(r.d)(h.a,null)))),Object(r.d)("div",{className:e.autoSizerWrapper},Object(r.d)(y.a,null,function(t){var e=t.width,n=t.height;return Object(r.d)(v.a,{width:e,height:n,geojson:f,buffers:g})})),Object(r.d)("div",{className:e.description},Object(r.d)(p.a,{variant:"h4"},b),Object(r.d)("div",null,Object(r.d)(T,{buffers:g})),Object(r.d)("ul",null,Object(r.d)("li",null,"1km: "+m),Object(r.d)("li",null,"3km: "+j),Object(r.d)("li",null,"5km: "+w),Object(r.d)("li",null,"10km: "+x)),Object(r.d)(i.Link,{to:"/"},"トップに戻る")))}));var N="1871970433"},165:function(t,e,n){"use strict";n.r(e),n.d(e,"graphql",function(){return g}),n.d(e,"StaticQueryContext",function(){return f}),n.d(e,"StaticQuery",function(){return p});var r=n(9),i=n(0),a=n.n(i),o=n(4),s=n.n(o),u=n(149),c=n.n(u);n.d(e,"Link",function(){return c.a}),n.d(e,"withPrefix",function(){return u.withPrefix}),n.d(e,"navigate",function(){return u.navigate}),n.d(e,"push",function(){return u.push}),n.d(e,"replace",function(){return u.replace}),n.d(e,"navigateTo",function(){return u.navigateTo});var l=n(169),d=n.n(l);n.d(e,"PageRenderer",function(){return d.a});var h=n(36);n.d(e,"parsePath",function(){return h.a});var f=a.a.createContext({}),p=function(t){return Object(r.d)(f.Consumer,null,function(e){return t.data||e[t.query]&&e[t.query].data?(t.render||t.children)(t.data?t.data.data:e[t.query].data):Object(r.d)("div",null,"Loading (StaticQuery)")})};function g(){throw new Error("It appears like Gatsby is misconfigured. Gatsby related `graphql` calls are supposed to only be evaluated at compile time, and then compiled away,. Unfortunately, something went wrong and the query was left in the compiled code.\n\n.Unless your site has a complex or custom babel/Gatsby configuration this is likely a bug in Gatsby.")}p.propTypes={data:s.a.object,query:s.a.string.isRequired,render:s.a.func,children:s.a.func}},169:function(t,e,n){var r;t.exports=(r=n(180))&&r.default||r},180:function(t,e,n){"use strict";n.r(e);n(55);var r=n(0),i=n.n(r),a=n(4),o=n.n(a),s=n(59),u=n(2),c=function(t){var e=t.location,n=u.default.getResourcesForPathnameSync(e.pathname);return i.a.createElement(s.a,Object.assign({location:e,pageResources:n},n.json))};c.propTypes={location:o.a.shape({pathname:o.a.string.isRequired}).isRequired},e.default=c},232:function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxwYXRoIGQ9Ik0xMiAyQzguMTMgMiA1IDUuMTMgNSA5YzAgNS4yNSA3IDEzIDcgMTNzNy03Ljc1IDctMTNjMC0zLjg3LTMuMTMtNy03LTd6bTAiIGZpbGw9IiMwMDkxRUEiIHN0cm9rZT0id2hpdGUiIHN0cm9rZS13aWR0aD0iMSIvPgogICAgPHBhdGggZD0iTTEyIDExLjVjLTEuMzggMC0yLjUtMS4xMi0yLjUtMi41czEuMTItMi41IDIuNS0yLjUgMi41IDEuMTIgMi41IDIuNS0xLjEyIDIuNS0yLjUgMi41eiIgZmlsbD0id2hpdGUiLz4KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiLz4KPC9zdmc+Cg=="},239:function(t,e,n){"use strict";var r=n(9),i=(n(0),n(240)),a=n(295),o=n.n(a),s=n(296),u=n.n(s),c=n(297),l=n.n(c),d=Object(i.createMuiTheme)({palette:{primary:o.a,secondary:u.a},typography:{useNextVariants:!0}});e.a=function(t){return function(e){return Object(r.d)(i.MuiThemeProvider,{theme:d},Object(r.d)(l.a,null),Object(r.d)(t,e))}}},254:function(t,e,n){"use strict";n(55);var r=n(7),i=n.n(r),a=n(9),o=n(0),s=n(150),u=n.n(s),c=n(179),l=n.n(c),d=n(313),h=n(276),f=n.n(h),p=(n(231),n(277)),g=n.n(p),b=(n(38),n(80),n(61),n(81),n(37),n(278),function(){function t(t){void 0===t&&(t={}),this.tileUrl=t.url||"//cyberjapandata.gsi.go.jp/xyz/std/{z}/{x}/{y}.png",this.tileTree={}}var e=t.prototype;return e.treeIncludesTile=function(t){var e=t.x,n=t.y,r=t.z;return this.tileTree.hasOwnProperty(r.toString())&&this.tileTree[r.toString()].hasOwnProperty(e.toString())&&this.tileTree[r.toString()][e.toString()].hasOwnProperty(n.toString())},e.tile2tree=function(t){var e,n,r=t.x,i=t.y,a=t.z,o=t.url;if(this.tileTree.hasOwnProperty(a.toString()))if(this.tileTree[a.toString()].hasOwnProperty(r.toString()))this.tileTree[a.toString()][r.toString()][i.toString()]=o;else{var s;this.tileTree[a.toString()][r.toString()]=((s={})[i.toString()]=o,s)}else this.tileTree[a.toString()]=((n={})[r.toString()]=((e={})[i.toString()]=o,e),n)},e.fetchTiles=function(t){var e=this;return new Promise(function(n){var r=t.map(function(t){return e.fetchTile(t,e.tileUrl)});Promise.all(r).then(function(t){n(t)})})},e.fetchTile=function(t,e){var n=this,r=t.x,i=t.y,a=t.z,o=e.replace("{z}/{x}/{y}",a+"/"+r+"/"+i);return fetch(o).then(function(t){if(!t.ok)throw new Error;return t.blob()}).then(function(e){var r=Object.assign({},t,{url:URL.createObjectURL(e)});return n.tile2tree(r),r}).catch(function(){var e=Object.assign({},t,{url:void 0});return n.tile2tree(e),e})},e.isRequireFetch=function(t){var e=this;return!t.every(function(t){return e.treeIncludesTile(t)})},e.setTileUrlFromTree=function(t){var e=this;return t.filter(function(t){return e.treeIncludesTile(t)}).map(function(t){return Object.assign({},t,{url:e.tileTree[t.z][t.x][t.y]})})},e.updateTiles=function(){var t=g()(f.a.mark(function t(e){var n,r,i,a=this;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.setTileUrlFromTree(e.filter(function(t){return a.treeIncludesTile(t)})),r=e.filter(function(t){return!a.treeIncludesTile(t)}),t.next=4,this.fetchTiles(r);case 4:return i=t.sent,t.abrupt("return",[].concat(n,i));case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),t}()),m=n(251),j=n(252),y=Object(m.b)(j.a).domain([1e3,0]),O=Object(m.a)().domain([0,1e3]).range([0,8]).exponent(.5),v=function(t){var e=t.feature,n=t.projection,r=e.properties.val,i=n(e.geometry.coordinates),o=Math.abs(O(r)*Math.max(1,n.scale()/125e3));return Object(a.d)("rect",{fill:y(r),fillOpacity:.6,x:i[0]-o/2,y:i[1]-o/2,width:o,height:o,style:{mixBlendMode:"multiply"}})},w=["0.3333 0.3333 0.3333 0 0","0.3333 0.3333 0.3333 0 0","0.3333 0.3333 0.3333 0 0","0 0 0 1 0"],x=function(t){return Object(a.d)("filter",{id:t.id},Object(a.d)("feColorMatrix",{type:"matrix",values:w.join(" ")}))},I=n(232),M=n.n(I),T=n(315).tile,S=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).state={fetchStatus:"yet"},e._tileSet=new b,e._getTileCoordinates=function(t){var n=e.props,r=n.width,i=n.height;return T().size([1.5*r,1.5*i]).scale(2*t.scale()*Math.PI*1.5).translate(t([0,0]).map(function(t){return 1.5*t}))().map(function(t,e,n){return Object.assign({},t,{mag:1.5,id:t.z+"/"+t.x+"/"+t.y,scale:n.scale,translate:n.translate})})},e._fetchTiles=function(t){return e._tileSet.updateTiles(t)},e}i()(e,t);var n=e.prototype;return n.componentDidMount=function(){},n.render=function(){var t=this,e=this.props,n=e.classes,r=e.width,i=e.height,o=e.buffers,s=e.geojson,u=o?Object(d.a)().fitExtent([[10,40],[r-10,i-40]],o[o.length-1]):Object(d.a)(),c=Object(d.b)(u),l=this._getTileCoordinates(u),h=this._tileSet.setTileUrlFromTree(l);return this._tileSet.isRequireFetch(l)&&this._fetchTiles(l).then(function(e){t.setState({fetchStatus:"fetched"})}),Object(a.d)("svg",{className:n.root,width:r,height:i},Object(a.d)("g",null,Object(a.d)(x,{id:"grayscale"}),Object(a.d)("g",{filter:"url(#grayscale)",className:n.tiles,style:{opacity:"fetched"===this.state.fetchStatus?1:0}},h.map(function(t,e){return Object(a.d)("image",{key:e,xlinkHref:t.url,x:(t.x+t.translate[0])*t.scale/t.mag,y:(t.y+t.translate[1])*t.scale/t.mag,width:t.scale/t.mag,height:t.scale/t.mag})}))),Object(a.d)("g",null,o.length?o.map(function(t,e){return Object(a.d)("path",{key:e,d:c(t),fill:"none",stroke:"rgba(200, 60, 80, 0.2)",strokeWidth:3})}):null),Object(a.d)("g",{className:n.points,style:{opacity:"fetched"===this.state.fetchStatus?1:0}},s?s.features.map(function(t,e){return"Point"===t.geometry.type?Object(a.d)(v,{key:e,feature:t,projection:u}):null}):null),Object(a.d)("g",null,Object(a.d)("image",{xlinkHref:M.a,x:r/2,y:i/2,width:28,height:28,transform:"translate(-14, -26)"})))},e}(o.Component);e.a=u()(function(t){return l()({root:{},tiles:{transition:"opacity 1s"},buffer:{fill:"none",stroke:t.palette.primary.main,strokeWidth:2},points:{transition:"opacity 1s .5s"}})})(S)}}]);
//# sourceMappingURL=component---src-templates-maps-tsx-c9f99a7cec7590374aef.js.map